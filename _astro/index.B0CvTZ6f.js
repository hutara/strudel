typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const g=BigInt(0),b=BigInt(1),wt=BigInt(2),Jt=BigInt(5),J=BigInt(10),_a=2e3,w={s:b,n:g,d:b};function Z(t,e){try{t=BigInt(t)}catch{throw nt()}return t*e}function U(t){return typeof t=="bigint"?t:Math.floor(t)}function T(t,e){if(e===g)throw Ht();const n=Object.create(S.prototype);n.s=t<g?-b:b,t=t<g?-t:t;const s=ot(t,e);return n.n=t/s,n.d=e/s,n}function ct(t){const e={};let n=t,s=wt,r=Jt-b;for(;r<=n;){for(;n%s===g;)n/=s,e[s]=(e[s]||g)+b;r+=b+wt*s++}return n!==t?n>1&&(e[n]=(e[n]||g)+b):e[t]=(e[t]||g)+b,e}const M=function(t,e){let n=g,s=b,r=b;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw nt();if(t%1!==0)throw qe();n=BigInt(t)}if(typeof e=="bigint")s=e;else{if(isNaN(e))throw nt();if(e%1!==0)throw qe();s=BigInt(e)}r=n*s}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),s=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(s=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw nt();r=n*s}else if(typeof t=="number"){if(isNaN(t))throw nt();if(t<0&&(r=-b,t=-t),t%1===0)n=BigInt(t);else if(t>0){let o=1,i=0,u=1,a=1,l=1,d=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);u<=d&&l<=d;){let p=(i+a)/(u+l);if(t===p){u+l<=d?(n=i+a,s=u+l):l>u?(n=a,s=l):(n=i,s=u);break}else t>p?(i+=a,u+=l):(a+=i,l+=u),u>d?(n=a,s=l):(n=i,s=u)}n=BigInt(n)*BigInt(o),s=BigInt(s)}}else if(typeof t=="string"){let o=0,i=g,u=g,a=g,l=b,d=b,p=t.replace(/_/g,"").match(/\d+|./g);if(p===null)throw nt();if(p[o]==="-"?(r=-b,o++):p[o]==="+"&&o++,p.length===o+1?u=Z(p[o++],r):p[o+1]==="."||p[o]==="."?(p[o]!=="."&&(i=Z(p[o++],r)),o++,(o+1===p.length||p[o+1]==="("&&p[o+3]===")"||p[o+1]==="'"&&p[o+3]==="'")&&(u=Z(p[o],r),l=J**BigInt(p[o].length),o++),(p[o]==="("&&p[o+2]===")"||p[o]==="'"&&p[o+2]==="'")&&(a=Z(p[o+1],r),d=J**BigInt(p[o+1].length)-b,o+=3)):p[o+1]==="/"||p[o+1]===":"?(u=Z(p[o],r),l=Z(p[o+2],b),o+=3):p[o+3]==="/"&&p[o+1]===" "&&(i=Z(p[o],r),u=Z(p[o+2],r),l=Z(p[o+4],b),o+=5),p.length<=o)s=l*d,r=n=a+s*i+d*u;else throw nt()}else if(typeof t=="bigint")n=t,r=t,s=b;else throw nt();if(s===g)throw Ht();w.s=r<g?-b:b,w.n=n<g?-n:n,w.d=s<g?-s:s};function va(t,e,n){let s=b;for(;e>g;t=t*t%n,e>>=b)e&b&&(s=s*t%n);return s}function ka(t,e){for(;e%wt===g;e/=wt);for(;e%Jt===g;e/=Jt);if(e===b)return g;let n=J%e,s=1;for(;n!==b;s++)if(n=n*J%e,s>_a)return g;return BigInt(s)}function qa(t,e,n){let s=b,r=va(J,n,e);for(let o=0;o<300;o++){if(s===r)return BigInt(o);s=s*J%e,r=r*J%e}return 0}function ot(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function S(t,e){if(M(t,e),this instanceof S)t=ot(w.d,w.n),this.s=w.s,this.n=w.n/t,this.d=w.d/t;else return T(w.s*w.n,w.d)}var Ht=function(){return new Error("Division by Zero")},nt=function(){return new Error("Invalid argument")},qe=function(){return new Error("Parameters must be integer")};S.prototype={s:b,n:g,d:b,abs:function(){return T(this.n,this.d)},neg:function(){return T(-this.s*this.n,this.d)},add:function(t,e){return M(t,e),T(this.s*this.n*w.d+w.s*this.d*w.n,this.d*w.d)},sub:function(t,e){return M(t,e),T(this.s*this.n*w.d-w.s*this.d*w.n,this.d*w.d)},mul:function(t,e){return M(t,e),T(this.s*w.s*this.n*w.n,this.d*w.d)},div:function(t,e){return M(t,e),T(this.s*w.s*this.n*w.d,this.d*w.n)},clone:function(){return T(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return T(this.s*this.n%this.d,b);if(M(t,e),g===w.n*this.d)throw Ht();return T(this.s*(w.d*this.n)%(w.n*this.d),w.d*this.d)},gcd:function(t,e){return M(t,e),T(ot(w.n,this.n)*ot(w.d,this.d),w.d*this.d)},lcm:function(t,e){return M(t,e),w.n===g&&this.n===g?T(g,b):T(w.n*this.n,ot(w.n,this.n)*ot(w.d,this.d))},inverse:function(){return T(this.s*this.d,this.n)},pow:function(t,e){if(M(t,e),w.d===b)return w.s<g?T((this.s*this.d)**w.n,this.n**w.n):T((this.s*this.n)**w.n,this.d**w.n);if(this.s<g)return null;let n=ct(this.n),s=ct(this.d),r=b,o=b;for(let i in n)if(i!=="1"){if(i==="0"){r=g;break}if(n[i]*=w.n,n[i]%w.d===g)n[i]/=w.d;else return null;r*=BigInt(i)**n[i]}for(let i in s)if(i!=="1"){if(s[i]*=w.n,s[i]%w.d===g)s[i]/=w.d;else return null;o*=BigInt(i)**s[i]}return w.s<g?T(o,r):T(r,o)},log:function(t,e){if(M(t,e),this.s<=g||w.s<=g)return null;const n={},s=ct(w.n),r=ct(w.d),o=ct(this.n),i=ct(this.d);for(const l in r)s[l]=(s[l]||g)-r[l];for(const l in i)o[l]=(o[l]||g)-i[l];for(const l in s)l!=="1"&&(n[l]=!0);for(const l in o)l!=="1"&&(n[l]=!0);let u=null,a=null;for(const l in n){const d=s[l]||g,p=o[l]||g;if(d===g){if(p!==g)return null;continue}let k=p,_=d;const A=ot(k,_);if(k/=A,_/=A,u===null&&a===null)u=k,a=_;else if(k*a!==u*_)return null}return u!==null&&a!==null?T(u,a):null},equals:function(t,e){return M(t,e),this.s*this.n*w.d===w.s*w.n*this.d},lt:function(t,e){return M(t,e),this.s*this.n*w.d<w.s*w.n*this.d},lte:function(t,e){return M(t,e),this.s*this.n*w.d<=w.s*w.n*this.d},gt:function(t,e){return M(t,e),this.s*this.n*w.d>w.s*w.n*this.d},gte:function(t,e){return M(t,e),this.s*this.n*w.d>=w.s*w.n*this.d},compare:function(t,e){M(t,e);let n=this.s*this.n*w.d-w.s*w.n*this.d;return(g<n)-(n<g)},ceil:function(t){return t=J**BigInt(t||0),T(U(this.s*t*this.n/this.d)+(t*this.n%this.d>g&&this.s>=g?b:g),t)},floor:function(t){return t=J**BigInt(t||0),T(U(this.s*t*this.n/this.d)-(t*this.n%this.d>g&&this.s<g?b:g),t)},round:function(t){return t=J**BigInt(t||0),T(U(this.s*t*this.n/this.d)+this.s*((this.s>=g?b:g)+wt*(t*this.n%this.d)>this.d?b:g),t)},roundTo:function(t,e){M(t,e);const n=this.n*w.d,s=this.d*w.n,r=n%s;let o=U(n/s);return r+r>=s&&o++,T(this.s*o*w.n,w.d)},divisible:function(t,e){return M(t,e),!(!(w.n*this.d)||this.n*w.d%(w.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let s=ka(e,n),r=qa(e,n,s),o=this.s<g?"-":"";if(o+=U(e/n),e%=n,e*=J,e&&(o+="."),s){for(let i=r;i--;)o+=U(e/n),e%=n,e*=J;o+="(";for(let i=s;i--;)o+=U(e/n),e%=n,e*=J;o+=")"}else for(let i=t;e&&i--;)o+=U(e/n),e%=n,e*=J;return o},toFraction:function(t){let e=this.n,n=this.d,s=this.s<g?"-":"";if(n===b)s+=e;else{let r=U(e/n);t&&r>g&&(s+=r,s+=" ",e%=n),s+=e,s+="/",s+=n}return s},toLatex:function(t){let e=this.n,n=this.d,s=this.s<g?"-":"";if(n===b)s+=e;else{let r=U(e/n);t&&r>g&&(s+=r,e%=n),s+="\\frac{",s+=e,s+="}{",s+=n,s+="}"}return s},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(U(t/e));let s=t%e;t=e,e=s}while(t!==b);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),s=n.toContinued();for(let r=1;r<s.length;r++){let o=T(s[r-1],b);for(let u=r-2;u>=0;u--)o=o.inverse().add(s[u]);let i=o.sub(n);if(i.n*e<i.d)return o.mul(this.s)}return this}};const Gt="strudel.log";let Aa=1e3,Ae,Se;function Qt(t,e="cyclist"){j(`[${e}] error: ${t.message}`)}function j(t,e,n={}){let s=performance.now();Ae===t&&s-Se<Aa||(Ae=t,Se=s,console.log(`%c${t}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(Gt,{detail:{message:t,type:e,data:n}})))}j.key=Gt;const Sa=t=>/^[a-gA-G][#bsf]*[0-9]*$/.test(t),Tt=t=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(t),Ce=t=>{if(typeof t!="string")return[];const[e,n="",s]=t.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return e?[e,n,s?Number(s):void 0]:[]},Ba={c:0,d:2,e:4,f:5,g:7,a:9,b:11},Ta={"#":1,b:-1,s:1,f:-1},xe=t=>t?.split("").reduce((e,n)=>e+Ta[n],0)||0,vt=(t,e=3)=>{const[n,s,r=e]=Ce(t);if(!n)throw new Error('not a note: "'+t+'"');const o=Ba[n.toLowerCase()],i=xe(s);return(Number(r)+1)*12+o+i},at=t=>Math.pow(2,(t-69)/12)*440,Oe=t=>12*Math.log(t/440)/Math.LN2+69,Ca=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=t;if(typeof n=="number")return Oe(n);if(typeof s=="string")return vt(s);if(typeof s=="number")return s;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},xa=(t,e)=>(t-e)*1e3,ze=t=>at(typeof t=="number"?t:vt(t)),Oa=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],za=t=>{const e=Math.floor(t/12)-1;return Oa[t%12]+e},kt=(t,e)=>(t%e+e)%e,Ee=t=>t.reduce((e,n)=>e+n)/t.length;function Ne(t,e=0){return isNaN(Number(t))?(j(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const Ea=(t,e)=>kt(Math.round(Ne(t??0,0)),e),Na=t=>{let{value:e,context:n}=t,s=e;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof s=="number"&&n.type!=="frequency")s=at(t.value);else if(typeof s=="number"&&n.type==="frequency")s=t.value;else if(typeof s!="string"||!Tt(s))throw new Error("not a note: "+JSON.stringify(s));return s},Ma=t=>{let{value:e,context:n}=t;if(typeof e=="object")return e.freq?e.freq:ze(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=at(t.value);else if(typeof e=="string"&&Tt(e))e=at(vt(t.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},Me=(t,e)=>t.slice(e).concat(t.slice(0,e)),Pe=(...t)=>t.reduce((e,n)=>(...s)=>e(n(...s)),e=>e),Pa=(...t)=>Pe(...t.reverse()),ft=t=>t.filter(e=>e!=null),X=t=>[].concat(...t),ut=t=>t,Ia=(t,e)=>t,qt=(t,e)=>Array.from({length:e-t+1},(n,s)=>s+t);function v(t,e,n=t.length){const s=function r(...o){if(o.length>=n)return t.apply(this,o);{const i=function(...u){return r.apply(this,o.concat(u))};return e&&e(i,o),i}};return e&&e(s,[]),s}function Ut(t){const e=Number(t);if(!isNaN(e))return e;if(Tt(t))return vt(t);throw new Error(`cannot parse as numeral: "${t}"`)}function Kt(t,e){return(...n)=>t(...n.map(e))}function D(t){return Kt(t,Ut)}function Ie(t){const e=Number(t);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[t];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${t}"`)}const ja=t=>Kt(t,Ie),Zt=function(t,e){return[e.slice(0,t),e.slice(t)]},Ct=(t,e,n)=>e.map((s,r)=>t(s,n[r])),je=function(t){const e=[];for(let n=0;n<t.length-1;++n)e.push([t[n],t[n+1]]);return e},Je=(t,e,n)=>Math.min(Math.max(t,e),n),Ja=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],Wa=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],$a=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],Ra=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],La=["I","Ro","Ha","Ni","Ho","He","To"],Fa=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Da=(t,e="letters")=>{const s=(e==="solfeggio"?Ja:e==="indian"?Wa:e==="german"?$a:e==="byzantine"?Ra:e==="japanese"?La:Fa)[t%12],r=Math.floor(t/12)-1;return s+r};function Va(t){var e={};return t.filter(function(n){return e.hasOwn(n)?!1:e[n]=!0})}function Ha(t){return t.sort().filter(function(e,n,s){return!n||e!=s[n-1]})}function We(t){return t.sort((e,n)=>e.compare(n)).filter(function(e,n,s){return!n||e.ne(s[n-1])})}function $e(t){const e=new TextEncoder().encode(t);return btoa(String.fromCharCode(...e))}function Re(t){const e=new Uint8Array(atob(t).split("").map(s=>s.charCodeAt(0)));return new TextDecoder().decode(e)}function Ga(t){return encodeURIComponent($e(t))}function Qa(t){return Re(decodeURIComponent(t))}function Le(t,e){return Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([n,s],r)=>[n,e(s,n,r)]))}function Wt(t,e){return t/e}class Fe{constructor({getTargetClockTime:e=Ka,weight:n=16,offsetDelta:s=.005,checkAfterTime:r=2,resetAfterTime:o=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=e,this.weight=n,this.offsetDelta=s,this.checkAfterTime=r,this.resetAfterTime=o,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(e){const n=this.getTargetClockTime(),s=n-this.timeAtPrevOffsetSample,r=n-e;if(s>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=r),this.prevOffsetTimes.push(r),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||s>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const o=Ee(this.prevOffsetTimes);Math.abs(o-this.offsetTime)>this.offsetDelta&&(this.offsetTime=o)}return this.offsetTime}calculateTimestamp(e,n){return this.calculateOffset(e)+n}}function Ua(){return performance.now()*.001}function Ka(){return Date.now()*.001}const De=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let yt;function Ve(){if(yt==null){if(typeof window>"u")return;yt={},window.addEventListener("keydown",t=>{yt[t.key]=!0}),window.addEventListener("keyup",t=>{yt[t.key]=!1})}return{...yt}}function Xt(t,e=!1){return typeof t=="object"?e?JSON.stringify(t).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(t):t}S.prototype.sam=function(){return this.floor()};S.prototype.nextSam=function(){return this.sam().add(1)};S.prototype.wholeCycle=function(){return new E(this.sam(),this.nextSam())};S.prototype.cyclePos=function(){return this.sub(this.sam())};S.prototype.lt=function(t){return this.compare(t)<0};S.prototype.gt=function(t){return this.compare(t)>0};S.prototype.lte=function(t){return this.compare(t)<=0};S.prototype.gte=function(t){return this.compare(t)>=0};S.prototype.eq=function(t){return this.compare(t)==0};S.prototype.ne=function(t){return this.compare(t)!=0};S.prototype.max=function(t){return this.gt(t)?this:t};S.prototype.maximum=function(...t){return t=t.map(e=>new S(e)),t.reduce((e,n)=>n.max(e),this)};S.prototype.min=function(t){return this.lt(t)?this:t};S.prototype.mulmaybe=function(t){return t!==void 0?this.mul(t):void 0};S.prototype.divmaybe=function(t){return t!==void 0?this.div(t):void 0};S.prototype.addmaybe=function(t){return t!==void 0?this.add(t):void 0};S.prototype.submaybe=function(t){return t!==void 0?this.sub(t):void 0};S.prototype.show=function(){return this.s*this.n+"/"+this.d};S.prototype.or=function(t){return this.eq(0)?t:this};const m=t=>S(t),Za=(...t)=>{if(t=ft(t),t.length!==0)return t.reduce((e,n)=>e.gcd(n),m(1))},it=(...t)=>{if(t=ft(t),t.length===0)return;const e=t.pop();return t.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),e)},Xa=t=>t instanceof S;m._original=S;class E{constructor(e,n){this.begin=m(e),this.end=m(n)}get spanCycles(){const e=[];var n=this.begin;const s=this.end,r=s.sam();if(n.equals(s))return[new E(n,s)];for(;s.gt(n);){if(n.sam().equals(r)){e.push(new E(n,this.end));break}const o=n.nextSam();e.push(new E(n,o)),n=o}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new E(e,n)}withTime(e){return new E(e(this.begin),e(this.end))}withEnd(e){return new E(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),s=n.add(e(this.begin.sub(n))),r=n.add(e(this.end.sub(n)));return new E(s,r)}intersection(e){const n=this.begin.max(e.begin),s=this.end.min(e.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new E(n,s)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(m(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class z{constructor(e,n,s,r={},o=!1){this.whole=e,this.part=n,this.value=s,this.context=r,this.stateful=o,o&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let e;return typeof this.value?.duration=="number"?e=m(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,n){return n-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,n){return n<this.whole.begin&&n>this.whole.begin-e}isWithinTime(e,n){return this.whole.begin<=n&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new z(n,e(this.part),this.value,this.context)}withValue(e){return new z(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){return this.context.tags?.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,r]=n(e);return[s,new z(this.whole,this.part,r,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var r=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),r||(s+="("),s+=this.part.show(),r||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${Xt(this.value,e)}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new z(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class lt{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new lt(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new lt(this.span,{...this.controls,...e})}}function Ya(t,e,n){if(e?.value!==void 0&&Object.keys(e).length===1)return j("[warn]: Can't do arithmetic on control pattern."),t;const s=Object.keys(t).filter(r=>Object.keys(e).includes(r));return Object.assign({},t,e,Object.fromEntries(s.map(r=>[r,n(t[r],e[r])])))}v((t,e)=>t*e);v((t,e)=>e.map(t));function He(t,e=60){let n=0,s=m(0),r=[""],o="";for(;r[0].length<e;){const i=t.queryArc(n,n+1),u=i.filter(d=>d.hasOnset()).map(d=>d.duration),a=Za(...u),l=a.inverse();r=r.map(d=>d+"|"),o+="|";for(let d=0;d<l;d++){const[p,k]=[s,s.add(a)],_=i.filter(C=>C.whole.begin.lte(p)&&C.whole.end.gte(k)),A=_.length-r.length;A>0&&(r=r.concat(Array(A).fill(o))),r=r.map((C,R)=>{const L=_[R];if(L){const O=L.whole.begin.eq(p)?""+L.value:"-";return C+O}return C+"."}),o+=".",s=s.add(a)}n++}return r.join(`
`)}let $t,H=!0;const tl=function(t){H=!!t},el=t=>$t=t;class h{constructor(e,n=void 0){this.query=e,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(e){this.__steps=e===void 0?void 0:m(e)}setSteps(e){return this._steps=e,this}withSteps(e){return H?new h(this.query,this._steps===void 0?void 0:e(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(e){const n=new h(s=>this.query(s).map(r=>r.withValue(e)));return n._steps=this._steps,n}withState(e){return new h(n=>this.query(e(n)))}fmap(e){return this.withValue(e)}appWhole(e,n){const s=this,r=function(o){const i=s.query(o),u=n.query(o),a=function(l,d){const p=l.part.intersection(d.part);if(p!=null)return new z(e(l.whole,d.whole),p,l.value(d.value),d.combineContext(l))};return X(i.map(l=>ft(u.map(d=>a(l,d)))))};return new h(r)}appBoth(e){const n=this,s=function(o,i){if(!(o==null||i==null))return o.intersection_e(i)},r=n.appWhole(s,e);return H&&(r._steps=it(e._steps,n._steps)),r}appLeft(e){const n=this,s=function(o){const i=[];for(const u of n.query(o)){const a=e.query(o.setSpan(u.wholeOrPart()));for(const l of a){const d=u.whole,p=u.part.intersection(l.part);if(p){const k=u.value(l.value),_=l.combineContext(u),A=new z(d,p,k,_);i.push(A)}}}return i},r=new h(s);return r._steps=this._steps,r}appRight(e){const n=this,s=function(o){const i=[];for(const u of e.query(o)){const a=n.query(o.setSpan(u.wholeOrPart()));for(const l of a){const d=u.whole,p=l.part.intersection(u.part);if(p){const k=l.value(u.value),_=u.combineContext(l),A=new z(d,p,k,_);i.push(A)}}}return i},r=new h(s);return r._steps=e._steps,r}bindWhole(e,n){const s=this,r=function(o){const i=function(a,l){return new z(e(a.whole,l.whole),l.part,l.value,Object.assign({},a.context,l.context,{locations:(a.context.locations||[]).concat(l.context.locations||[])}))},u=function(a){return n(a.value).query(o.setSpan(a.part)).map(l=>i(a,l))};return X(s.query(o).map(a=>u(a)))};return new h(r)}bind(e){const n=function(s,r){if(!(s==null||r==null))return s.intersection_e(r)};return this.bindWhole(n,e)}join(){return this.bind(ut)}outerBind(e){return this.bindWhole(n=>n,e).setSteps(this._steps)}outerJoin(){return this.outerBind(ut)}innerBind(e){return this.bindWhole((n,s)=>s,e)}innerJoin(){return this.innerBind(ut)}resetJoin(e=!1){const n=this;return new h(s=>n.discreteOnly().query(s).map(r=>r.value.late(e?r.whole.begin:r.whole.begin.cyclePos()).query(s).map(o=>new z(o.whole?o.whole.intersection(r.whole):void 0,o.part.intersection(r.part),o.value).setContext(r.combineContext(o))).filter(o=>o.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function n(s){const r=e.discreteOnly().query(s);function o(u){const l=u.value._focusSpan(u.wholeOrPart()).query(s.setSpan(u.part));function d(p,k){let _;if(k.whole&&p.whole&&(_=k.whole.intersection(p.whole),!_))return;const A=k.part.intersection(p.part);if(!A)return;const C=k.combineContext(p);return new z(_,A,k.value,C)}return l.map(p=>d(u,p))}return X(r.map(o)).filter(u=>u)}return new h(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}polyJoin=function(){const e=this;return e.fmap(n=>n.extend(e._steps.div(n._steps))).outerJoin()};polyBind(e){return this.fmap(e).polyJoin()}queryArc(e,n,s={}){try{return this.query(new lt(new E(e,n),s))}catch(r){return j(`[query]: ${r.message}`,"error"),[]}}splitQueries(){const e=this,n=s=>X(s.span.spanCycles.map(r=>e.query(s.setSpan(r))));return new h(n)}withQuerySpan(e){return new h(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new h(s=>{const r=s.withSpan(e);return r.span?n.query(r):[]})}withQueryTime(e){return new h(n=>this.query(n.withSpan(s=>s.withTime(e))))}withHapSpan(e){return new h(n=>this.query(n).map(s=>s.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){const n=new h(s=>e(this.query(s),s));return n._steps=this._steps,n}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){const n=this.withHap(s=>s.setContext(e(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const s={start:e,end:n},r=this.withContext(o=>{const i=(o.locations||[]).concat([s]);return{...o,locations:i}});return this.__pure&&(r.__pure=this.__pure,r.__pure_loc=s),r}filterHaps(e){return new h(n=>this.query(n).filter(e))}filterValues(e){return new h(n=>this.query(n).filter(s=>e(s.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(n=>{const s=[];for(var r=0;r<n.length;++r){for(var o=!0,i=n[r];o;){const l=JSON.stringify(n[r].value);for(var u=!1,a=r+1;a<n.length;a++){const d=n[a];if(i.whole.equals(d.whole)){if(i.part.begin.eq(d.part.end)){if(l===JSON.stringify(d.value)){i=new z(i.whole,new E(d.part.begin,i.part.end),i.value),n.splice(a,1),u=!0;break}}else if(d.part.begin.eq(i.part.end)&&l==JSON.stringify(d.value)){i=new z(i.whole,new E(i.part.begin,d.part.end),i.value),n.splice(a,1),u=!0;break}}}o=u}s.push(i)}return s})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new lt(new E(m(0),m(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(Ut)}_opIn(e,n){return this.fmap(n).appLeft(y(e))}_opOut(e,n){return this.fmap(n).appRight(y(e))}_opMix(e,n){return this.fmap(n).appBoth(y(e))}_opSqueeze(e,n){const s=y(e);return this.fmap(r=>s.fmap(o=>n(r)(o))).squeezeJoin()}_opSqueezeOut(e,n){const s=this;return y(e).fmap(o=>s.fmap(i=>n(i)(o))).squeezeJoin()}_opReset(e,n){return y(e).fmap(r=>this.fmap(o=>n(o)(r))).resetJoin()}_opRestart(e,n){return y(e).fmap(r=>this.fmap(o=>n(o)(r))).restartJoin()}_opPoly(e,n){const s=y(e);return this.fmap(r=>s.fmap(o=>n(o)(r))).polyJoin()}layer(...e){return N(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return N(this,...e)}sequence(...e){return Y(this,...e)}seq(...e){return Y(this,...e)}cat(...e){return gt(this,...e)}fastcat(...e){return $(this,...e)}slowcat(...e){return st(this,...e)}onTrigger(e,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...r)=>{s.context.onTrigger?.(...r),e(...r)},dominantTrigger:s.context.dominantTrigger||n}))}log(e=s=>`[hap] ${s.showWhole(!0)}`,n=s=>({hap:s})){return this.onTrigger((...s)=>{j(e(...s),void 0,n(...s))},!1)}logValues(e=n=>`[hap] ${Xt(n,!0)}`){return this.log(n=>e(n.value))}drawLine(){return console.log(He(this)),this}unjoin(e,n=ut){return e.withHap(s=>s.withValue(r=>r?n(this.ribbon(s.whole.begin,s.whole.duration)):this))}into(e,n){return this.unjoin(e,n).innerJoin()}}function nl(t,e){let n=[];return e.forEach(s=>{const r=n.findIndex(([o])=>t(s,o));r===-1?n.push([s]):n[r].push(s)}),n}const sl=(t,e)=>t.spanEquals(e);h.prototype.collect=function(){return this.withHaps(t=>nl(sl,t).map(e=>new z(e[0].whole,e[0].part,e,{})))};const rl=f("arpWith",(t,e)=>e.collect().fmap(n=>y(t(n))).innerJoin().withHap(n=>new z(n.whole,n.part,n.value.value,n.combineContext(n.value)))),ol=f("arp",(t,e)=>e.arpWith(n=>y(t).fmap(s=>n[s%n.length])),!1);function St(t){return!Array.isArray(t)&&typeof t=="object"&&!Xa(t)}function il(t,e,n){return St(t)||St(e)?(St(t)||(t={value:t}),St(e)||(e={value:e}),Ya(t,e,n)):n(t,e)}(function(){const t={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[D((n,s)=>n+s)],sub:[D((n,s)=>n-s)],mul:[D((n,s)=>n*s)],div:[D((n,s)=>n/s)],mod:[D(kt)],pow:[D(Math.pow)],log2:[D(Math.log2)],band:[D((n,s)=>n&s)],bor:[D((n,s)=>n|s)],bxor:[D((n,s)=>n^s)],blshift:[D((n,s)=>n<<s)],brshift:[D((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[s,r]]of Object.entries(t)){h.prototype["_"+n]=function(o){return this.fmap(i=>s(i,o))},Object.defineProperty(h.prototype,n,{get:function(){const o=this,i=(...u)=>o[n].in(...u);for(const u of e)i[u.toLowerCase()]=function(...a){var l=o;a=Y(a),r&&(l=r(l),a=r(a));var d;return n==="keepif"?(d=l["_op"+u](a,p=>k=>s(p,k)),d=d.removeUndefineds()):d=l["_op"+u](a,p=>k=>il(p,k,s)),d};return i.squeezein=i.squeeze,i}});for(const o of e)h.prototype[o.toLowerCase()]=function(...i){return this.set[o.toLowerCase()](i)}}h.prototype.struct=function(...n){return this.keepif.out(...n)},h.prototype.structAll=function(...n){return this.keep.out(...n)},h.prototype.mask=function(...n){return this.keepif.in(...n)},h.prototype.maskAll=function(...n){return this.keep.in(...n)},h.prototype.reset=function(...n){return this.keepif.reset(...n)},h.prototype.resetAll=function(...n){return this.keep.reset(...n)},h.prototype.restart=function(...n){return this.keepif.restart(...n)},h.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const cl=N,ul=N,al=xt,pt=t=>new h(()=>[],t),B=pt(1),V=pt(0);function I(t){function e(s){return s.span.spanCycles.map(r=>new z(m(r.begin).wholeCycle(),r,t))}const n=new h(e,1);return n.__pure=t,n}function Yt(t){return t instanceof h||t?._Pattern}function y(t){return Yt(t)?t:$t&&typeof t=="string"?$t(t):I(t)}function Ge(t){let e=I([]);for(const n of t)e=e.bind(s=>n.fmap(r=>s.concat([r])));return e}function N(...t){t=t.map(s=>Array.isArray(s)?Y(...s):y(s));const e=s=>X(t.map(r=>r.query(s))),n=new h(e);return H&&(n._steps=it(...t.map(s=>s._steps))),n}function te(t,e){if(e=e.map(o=>Array.isArray(o)?Y(...o):y(o)),e.length===0)return B;if(e.length===1)return e[0];const[n,...s]=e.map(o=>o._steps),r=H?n.maximum(...s):void 0;return N(...t(r,e))}function Qe(...t){return te((e,n)=>n.map(s=>s._steps.eq(e)?s:W(s,pt(e.sub(s._steps)))),t)}function Ue(...t){return te((e,n)=>n.map(s=>s._steps.eq(e)?s:W(pt(e.sub(s._steps)),s)),t)}function Ke(...t){return te((e,n)=>n.map(s=>{if(s._steps.eq(e))return s;const r=pt(e.sub(s._steps).div(2));return W(r,s,r)}),t)}function ll(t,...e){const[n,...s]=e.map(i=>i._steps),r=n.maximum(...s),o={centre:Ke,left:Qe,right:Ue,expand:N,repeat:(...i)=>xt(...i).steps(r)};return t.inhabit(o).fmap(i=>i(...e)).innerJoin().setSteps(r)}function st(...t){if(t=t.map(s=>Array.isArray(s)?$(...s):y(s)),t.length==1)return t[0];const e=function(s){const r=s.span,o=kt(r.begin.sam(),t.length),i=t[o];if(!i)return[];const u=r.begin.floor().sub(r.begin.div(t.length).floor());return i.withHapTime(a=>a.add(u)).query(s.setSpan(r.withTime(a=>a.sub(u))))},n=H?it(...t.map(s=>s._steps)):void 0;return new h(e).splitQueries().setSteps(n)}function ee(...t){t=t.map(y);const e=function(n){const s=Math.floor(n.span.begin)%t.length;return t[s]?.query(n)||[]};return new h(e).splitQueries()}function gt(...t){return st(...t)}function fl(...t){const e=t.reduce((n,[s])=>n+s,0);return t=t.map(([n,s])=>[n,s.fast(n)]),W(...t).slow(e)}function pl(...t){let e=m(0);for(let n of t)n.length==2&&n.unshift(e),e=n[1];return N(...t.map(([n,s,r])=>I(y(r)).compress(m(n).div(e),m(s).div(e)))).slow(e).innerJoin()}function $(...t){let e=st(...t);return t.length>1&&(e=e._fast(t.length),e._steps=t.length),t.length==1&&t[0].__steps_source&&(t._steps=t[0]._steps),e}function Y(...t){return $(...t)}function Ze(...t){return $(...t)}function Rt(t){return Array.isArray(t)?t.length==0?[B,0]:t.length==1?Rt(t[0]):[$(...t.map(e=>Rt(e)[0])),t.length]:[y(t),1]}const hl=v((t,e)=>y(e).mask(t)),dl=v((t,e)=>y(e).struct(t)),ml=v((t,e)=>y(e).superimpose(...t)),yl=v((t,e)=>y(e).withValue(t)),wl=v((t,e)=>y(e).bind(t)),gl=v((t,e)=>y(e).innerBind(t)),bl=v((t,e)=>y(e).outerBind(t)),_l=v((t,e)=>y(e).squeezeBind(t)),vl=v((t,e)=>y(e).stepBind(t)),kl=v((t,e)=>y(e).polyBind(t)),ql=v((t,e)=>y(e).set(t)),Al=v((t,e)=>y(e).keep(t)),Sl=v((t,e)=>y(e).keepif(t)),Bl=v((t,e)=>y(e).add(t)),Tl=v((t,e)=>y(e).sub(t)),Cl=v((t,e)=>y(e).mul(t)),xl=v((t,e)=>y(e).div(t)),Ol=v((t,e)=>y(e).mod(t)),zl=v((t,e)=>y(e).pow(t)),El=v((t,e)=>y(e).band(t)),Nl=v((t,e)=>y(e).bor(t)),Ml=v((t,e)=>y(e).bxor(t)),Pl=v((t,e)=>y(e).blshift(t)),Il=v((t,e)=>y(e).brshift(t)),jl=v((t,e)=>y(e).lt(t)),Jl=v((t,e)=>y(e).gt(t)),Wl=v((t,e)=>y(e).lte(t)),$l=v((t,e)=>y(e).gte(t)),Rl=v((t,e)=>y(e).eq(t)),Ll=v((t,e)=>y(e).eqt(t)),Fl=v((t,e)=>y(e).ne(t)),Dl=v((t,e)=>y(e).net(t)),Vl=v((t,e)=>y(e).and(t)),Hl=v((t,e)=>y(e).or(t)),Gl=v((t,e)=>y(e).func(t));function f(t,e,n=!0,s=!1,r=o=>o.innerJoin()){if(Array.isArray(t)){const u={};for(const a of t)u[a]=f(a,e,n,s,r);return u}const o=e.length;var i;return n?i=function(...u){u=u.map(y);const a=u[u.length-1];let l;if(o===1)l=e(a);else{const d=u.slice(0,-1);if(d.every(p=>p.__pure!=null)){const p=d.map(_=>_.__pure),k=d.filter(_=>_.__pure_loc).map(_=>_.__pure_loc);l=e(...p,a),l=l.withContext(_=>{const A=(_.locations||[]).concat(k);return{..._,locations:A}})}else{const[p,...k]=d;let _=(...A)=>e(...A,a);_=v(_,null,o-1),l=r(k.reduce((A,C)=>A.appLeft(C),p.fmap(_)))}}return s&&(l._steps=a._steps),l}:i=function(...u){u=u.map(y);const a=e(...u);return s&&(a._steps=u[u.length-1]._steps),a},h.prototype[t]=function(...u){if(o===2&&u.length!==1)u=[Y(...u)];else if(o!==u.length+1)throw new Error(`.${t}() expects ${o-1} inputs but got ${u.length}.`);return u=u.map(y),i(...u,this)},o>1&&(h.prototype["_"+t]=function(...u){const a=e(...u,this);return s&&a.setSteps(this._steps),a}),v(i,null,o)}function ht(t,e,n=!0,s=!1,r=o=>o.stepJoin()){return f(t,e,n,s,r)}const Ql=f("round",function(t){return t.asNumber().fmap(e=>Math.round(e))}),Ul=f("floor",function(t){return t.asNumber().fmap(e=>Math.floor(e))}),Kl=f("ceil",function(t){return t.asNumber().fmap(e=>Math.ceil(e))}),Zl=f("toBipolar",function(t){return t.fmap(e=>e*2-1)}),Xl=f("fromBipolar",function(t){return t.fmap(e=>(e+1)/2)}),Yl=f("range",function(t,e,n){return n.mul(e-t).add(t)}),tf=f("rangex",function(t,e,n){return n._range(Math.log(t),Math.log(e)).fmap(Math.exp)}),ef=f("range2",function(t,e,n){return n.fromBipolar()._range(t,e)}),nf=f("ratio",t=>t.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,s)=>n/s,e[0]):e)),sf=f("compress",function(t,e,n){return t=m(t),e=m(e),t.gt(e)||t.gt(1)||e.gt(1)||t.lt(0)||e.lt(0)?B:n._fastGap(m(1).div(e.sub(t)))._late(t)}),{compressSpan:rf,compressspan:of}=f(["compressSpan","compressspan"],function(t,e){return e._compress(t.begin,t.end)}),{fastGap:cf,fastgap:uf}=f(["fastGap","fastgap"],function(t,e){const n=function(r){const o=r.begin.sam(),i=r.begin.sub(o).mul(t).min(1),u=r.end.sub(o).mul(t).min(1);if(!(i>=1))return new E(o.add(i),o.add(u))},s=function(r){const o=r.part.begin,i=r.part.end,u=o.sam(),a=o.sub(u).div(t).min(1),l=i.sub(u).div(t).min(1),d=new E(u.add(a),u.add(l)),p=r.whole?new E(d.begin.sub(o.sub(r.whole.begin).div(t)),d.end.add(r.whole.end.sub(i).div(t))):void 0;return new z(p,d,r.value,r.context)};return e.withQuerySpanMaybe(n).withHap(s).splitQueries()}),af=f("focus",function(t,e,n){return t=m(t),e=m(e),n._early(t.sam())._fast(m(1).div(e.sub(t)))._late(t)}),{focusSpan:lf,focusspan:ff}=f(["focusSpan","focusspan"],function(t,e){return e._focus(t.begin,t.end)}),pf=f("ply",function(t,e){const n=e.fmap(s=>I(s)._fast(t)).squeezeJoin();return H&&(n._steps=m(t).mulmaybe(e._steps)),n}),{fast:hf,density:Cd}=f(["fast","density"],function(t,e){return t===0?B:(t=m(t),e.withQueryTime(s=>s.mul(t)).withHapTime(s=>s.div(t)).setSteps(e._steps))},!0,!0),df=f("hurry",function(t,e){return e._fast(t).mul(I({speed:t}))}),{slow:mf,sparsity:yf}=f(["slow","sparsity"],function(t,e){return t===0?B:e._fast(m(1).div(t))}),wf=f("inside",function(t,e,n){return e(n._slow(t))._fast(t)}),gf=f("outside",function(t,e,n){return e(n._fast(t))._slow(t)}),bf=f("lastOf",function(t,e,n){const s=Array(t-1).fill(n);return s.push(e(n)),ee(...s)}),{firstOf:_f,every:vf}=f(["firstOf","every"],function(t,e,n){const s=Array(t-1).fill(n);return s.unshift(e(n)),ee(...s)}),kf=f("apply",function(t,e){return t(e)}),qf=f("cpm",function(t,e){return e._fast(t/60/1)}),Af=f("early",function(t,e){return t=m(t),e.withQueryTime(n=>n.add(t)).withHapTime(n=>n.sub(t))},!0,!0),Xe=f("late",function(t,e){return t=m(t),e._early(m(0).sub(t))},!0,!0),Sf=f("zoom",function(t,e,n){if(e=m(e),t=m(t),t.gte(e))return V;const s=e.sub(t),r=H?n._steps?.mulmaybe(s):void 0;return n.withQuerySpan(o=>o.withCycle(i=>i.mul(s).add(t))).withHapSpan(o=>o.withCycle(i=>i.sub(t).div(s))).splitQueries().setSteps(r)}),{zoomArc:Bf,zoomarc:Tf}=f(["zoomArc","zoomarc"],function(t,e){return e.zoom(t.begin,t.end)}),Cf=f("bite",(t,e,n)=>e.fmap(s=>r=>{const o=m(s).div(r).mod(1),i=o.add(m(1).div(r));return n.zoom(o,i)}).appLeft(t).squeezeJoin(),!1),xf=f("linger",function(t,e){return t==0?B:t<0?e._zoom(t.add(1),1)._slow(t):e._zoom(0,t)._slow(t)},!0,!0),{segment:Of,seg:zf}=f(["segment","seg"],function(t,e){return e.struct(I(!0)._fast(t)).setSteps(t)}),Ef=f("swingBy",(t,e,n)=>n.inside(e,Xe(Ze(0,t/2)))),Nf=f("swing",(t,e)=>e.swingBy(1/3,t)),{invert:Mf,inv:Pf}=f(["invert","inv"],function(t){return t.fmap(e=>!e)},!0,!0),If=f("when",function(t,e,n){return t?e(n):n}),jf=f("off",function(t,e,n){return N(n,e(n.late(t)))}),Jf=f("brak",function(t){return t.when(st(!1,!0),e=>$(e,B)._late(.25))}),Ye=f("rev",function(t){const e=function(n){const s=n.span,r=s.begin.sam(),o=s.begin.nextSam(),i=function(a){const l=a.withTime(p=>r.add(o.sub(p))),d=l.begin;return l.begin=l.end,l.end=d,l};return t.query(n.setSpan(i(s))).map(a=>a.withSpan(i))};return new h(e).splitQueries()},!1,!0),Wf=f("pressBy",function(t,e){return e.fmap(n=>I(n).compress(t,1)).squeezeJoin()}),$f=f("press",function(t){return t._pressBy(.5)});h.prototype.hush=function(){return B};const Rf=f("palindrome",function(t){return t.lastOf(2,Ye)},!0,!0),{juxBy:Lf,juxby:Ff}=f(["juxBy","juxby"],function(t,e,n){t/=2;const s=function(i,u,a){return u in i?i[u]:a},r=n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)-t})),o=e(n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)+t})));return N(r,o).setSteps(H?it(r._steps,o._steps):void 0)}),Df=f("jux",function(t,e){return e._juxBy(1,t,e)}),{echoWith:Vf,echowith:Hf,stutWith:Gf,stutwith:Qf}=f(["echoWith","echowith","stutWith","stutwith"],function(t,e,n,s){return N(...qt(0,t-1).map(r=>n(s.late(m(e).mul(r)),r)))}),Uf=f("echo",function(t,e,n,s){return s._echoWith(t,e,(r,o)=>r.gain(Math.pow(n,o)))}),Kf=f("stut",function(t,e,n,s){return s._echoWith(t,n,(r,o)=>r.gain(Math.pow(e,o)))}),tn=f("applyN",function(t,e,n){let s=n;for(let r=0;r<t;r++)s=e(s);return s}),Zf=f(["plyWith","plywith"],function(t,e,n){const s=n.fmap(r=>gt(...qt(0,t-1).map(o=>tn(o,e,r)))._fast(t)).squeezeJoin();return H&&(s._steps=m(t).mulmaybe(n._steps)),s}),Xf=f(["plyForEach","plyforeach"],function(t,e,n){const s=n.fmap(r=>gt(gt(I(r),...qt(1,t-1).map(o=>e(I(r),o))))._fast(t)).squeezeJoin();return H&&(s._steps=m(t).mulmaybe(n._steps)),s}),ne=function(t,e,n=!1){return t=m(t),st(...qt(0,t.sub(1)).map(s=>n?e.late(m(s).div(t)):e.early(m(s).div(t))))},Yf=f("iter",function(t,e){return ne(t,e,!1)},!0,!0),{iterBack:tp,iterback:ep}=f(["iterBack","iterback"],function(t,e){return ne(t,e,!0)},!0,!0),{repeatCycles:np}=f("repeatCycles",function(t,e){return new h(function(n){const s=n.span.begin.sam(),r=s.div(t).sam(),o=s.sub(r);return n=n.withSpan(i=>i.withTime(u=>u.sub(o))),e.query(n).map(i=>i.withSpan(u=>u.withTime(a=>a.add(o))))}).splitQueries()},!0,!0),se=function(t,e,n,s=!1,r=!1){const o=Array(t-1).fill(!1);o.unshift(!0);const i=ne(t,Y(...o),!s);return r||(n=n.repeatCycles(t)),n.when(i,e)},{chunk:sp,slowchunk:rp,slowChunk:op}=f(["chunk","slowchunk","slowChunk"],function(t,e,n){return se(t,e,n,!1,!1)},!0,!0),{chunkBack:ip,chunkback:cp}=f(["chunkBack","chunkback"],function(t,e,n){return se(t,e,n,!0)},!0,!0),{fastchunk:up,fastChunk:ap}=f(["fastchunk","fastChunk"],function(t,e,n){return se(t,e,n,!1,!0)},!0,!0),{chunkinto:lp,chunkInto:fp}=f(["chunkinto","chunkInto"],function(t,e,n){return n.into($(!0,...Array(t-1).fill(!1))._iterback(t),e)}),{chunkbackinto:pp,chunkBackInto:hp}=f(["chunkbackinto","chunkBackInto"],function(t,e,n){return n.into($(!0,...Array(t-1).fill(!1))._iter(t)._early(1),e)}),dp=f("bypass",function(t,e){return t=!!parseInt(t),t?B:e},!0,!0),{ribbon:mp,rib:yp}=f(["ribbon","rib"],(t,e,n)=>n.early(t).restart(I(1).slow(e))),wp=f("hsla",(t,e,n,s,r)=>r.color(`hsla(${t}turn,${e*100}%,${n*100}%,${s})`)),gp=f("hsl",(t,e,n,s)=>s.color(`hsl(${t}turn,${e*100}%,${n*100}%)`));h.prototype.tag=function(t){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([t])}))};const bp=f("filter",(t,e)=>e.withHaps(n=>n.filter(t))),_p=f("filterWhen",(t,e)=>e.filter(n=>t(n.whole.begin))),vp=f("within",(t,e,n,s)=>N(n(s.filterWhen(r=>r.cyclePos()>=t&&r.cyclePos()<=e)),s.filterWhen(r=>r.cyclePos()<t||r.cyclePos()>e)));h.prototype.stepJoin=function(){const t=this,e=W(...Lt(Ft(t.queryArc(0,1))))._steps,n=function(s){const o=t.early(s.span.begin.sam()).query(s.setSpan(new E(m(0),m(1))));return W(...Lt(Ft(o))).query(s)};return new h(n,e)};h.prototype.stepBind=function(t){return this.fmap(t).stepJoin()};function Lt(t){const e=t.filter((o,i)=>i.hasSteps).reduce((o,i)=>o.add(i),m(0)),n=ft(t.map((o,i)=>i._steps)).reduce((o,i)=>o.add(i),m(0)),s=e.eq(0)?void 0:n.div(e);function r(o,i){return i._steps===void 0?[o.mulmaybe(s),i]:[i._steps,i]}return t.map(o=>r(...o))}function Ft(t){const e=X(t.map(r=>[r.part.begin,r.part.end])),n=We([m(0),m(1),...e]);return je(n).map(r=>[r[1].sub(r[0]),N(...en(new E(...r),t).map(o=>o.value.withHap(i=>i.setContext(i.combineContext(o)))))])}function en(t,e){return ft(e.map(n=>nn(t,n)))}function nn(t,e){const n=t.intersection(e.part);if(n!=null)return new z(e.whole,n,e.value,e.context)}const sn=f("pace",function(t,e){return e._steps===void 0?e:e._steps.eq(m(0))?V:e._fast(m(t).div(e._steps)).setSteps(t)});function rn(t,...e){const n=e.map(r=>Rt(r));if(n.length==0)return B;t==0&&(t=n[0][1]);const s=[];for(const r of n)r[1]!=0&&(t==r[1]?s.push(r[0]):s.push(r[0]._fast(m(t).div(m(r[1])))));return N(...s)}function xt(...t){if(Array.isArray(t[0]))return rn(0,...t);if(t=t.filter(s=>s.hasSteps),t.length==0)return B;const e=it(...t.map(s=>s._steps));if(e.eq(m(0)))return V;const n=N(...t.map(s=>s.pace(e)));return n._steps=e,n}function W(...t){if(t.length===0)return V;const e=i=>Array.isArray(i)?i:[i._steps??1,i];if(t=t.map(e),t.find(i=>i[0]===void 0)){const i=t.map(a=>a[0]).filter(a=>a!==void 0);if(i.length===0)return $(...t.map(a=>a[1]));if(i.length===t.length)return V;const u=i.reduce((a,l)=>a.add(l),m(0)).div(i.length);for(let a of t)a[0]===void 0&&(a[0]=u)}if(t.length==1)return y(t[0][1]).withSteps(u=>t[0][0]);const n=t.map(i=>i[0]).reduce((i,u)=>i.add(u),m(0));let s=m(0);const r=[];for(const[i,u]of t){if(m(i).eq(0))continue;const a=s.add(i);r.push(y(u)._compress(s.div(n),a.div(n))),s=a}const o=N(...r);return o._steps=n,o}function on(...t){t=t.map(r=>Array.isArray(r)?r.map(y):[y(r)]);const e=it(...t.map(r=>m(r.length)));let n=[];for(let r=0;r<e;++r)n.push(...t.map(o=>o.length==0?B:o[r%o.length]));n=n.filter(r=>r.hasSteps&&r._steps>0);const s=n.reduce((r,o)=>r.add(o._steps),m(0));return n=W(...n),n._steps=s,n}const cn=ht("take",function(t,e){if(!e.hasSteps||e._steps.lte(0)||(t=m(t),t.eq(0)))return V;const n=t<0;n&&(t=t.abs());const s=t.div(e._steps);return s.lte(0)?V:s.gte(1)?e:n?e.zoom(m(1).sub(s),1):e.zoom(0,s)}),un=ht("drop",function(t,e){return e.hasSteps?(t=m(t),t.lt(0)?e.take(e._steps.add(t)):e.take(m(0).sub(e._steps.sub(t)))):V}),an=ht("extend",function(t,e){return e.fast(t).expand(t)}),kp=ht("replicate",function(t,e){return e.repeatCycles(t).fast(t).expand(t)}),ln=ht("expand",function(t,e){return e.withSteps(n=>n.mul(m(t)))}),fn=ht("contract",function(t,e){return e.withSteps(n=>n.div(m(t)))});h.prototype.shrinklist=function(t){const e=this;if(!e.hasSteps)return[e];let[n,s]=Array.isArray(t)?t:[t,e._steps];if(n=m(n),s===0||n===0)return[e];const r=n>0,o=[];if(r){const i=m(1).div(e._steps).mul(n);for(let u=0;u<s;++u){const a=i.mul(u);if(a.gt(1))break;o.push([a,1])}}else{n=m(0).sub(n);const i=m(1).div(e._steps).mul(n);for(let u=0;u<s;++u){const a=m(1).sub(i.mul(u));if(a.lt(0))break;o.push([m(0),a])}}return o.map(i=>e.zoom(...i))};const pn=(t,e)=>e.shrinklist(t),hn=f("shrink",function(t,e){if(!e.hasSteps)return V;const n=e.shrinklist(t),s=W(...n);return s._steps=n.reduce((r,o)=>r.add(o._steps),m(0)),s},!0,!1,t=>t.stepJoin()),qp=f("grow",function(t,e){if(!e.hasSteps)return V;const n=e.shrinklist(m(0).sub(t));n.reverse();const s=W(...n);return s._steps=n.reduce((r,o)=>r.add(o._steps),m(0)),s},!0,!1,t=>t.stepJoin()),dn=function(t,...e){return t.tour(...e)};h.prototype.tour=function(...t){return W(...[].concat(...t.map((e,n)=>[...t.slice(0,t.length-n),this,...t.slice(t.length-n)]),this,...t))};const mn=function(...t){t=t.filter(s=>s.hasSteps);const e=st(...t.map(s=>s._slow(s._steps))),n=it(...t.map(s=>s._steps));return e._fast(n).setSteps(n)},Ap=W,yn=W,Sp=W,Bp=on,Tp=xt;h.prototype.s_polymeter=h.prototype.polymeter;const Cp=hn;h.prototype.s_taper=h.prototype.shrink;const xp=pn;h.prototype.s_taperlist=h.prototype.shrinklist;const Op=cn;h.prototype.s_add=h.prototype.take;const zp=un;h.prototype.s_sub=h.prototype.drop;const Ep=ln;h.prototype.s_expand=h.prototype.expand;const Np=an;h.prototype.s_extend=h.prototype.extend;const Mp=fn;h.prototype.s_contract=h.prototype.contract;const Pp=dn;h.prototype.s_tour=h.prototype.tour;const Ip=mn;h.prototype.s_zip=h.prototype.zip;const jp=sn;h.prototype.steps=h.prototype.pace;const Jp=f("chop",function(t,e){const s=Array.from({length:t},(i,u)=>u).map(i=>({begin:i/t,end:(i+1)/t})),r=function(i,u){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const a=i.end-i.begin;u={begin:i.begin+u.begin*a,end:i.begin+u.end*a}}return Object.assign({},i,u)},o=function(i){return Y(s.map(u=>r(i,u)))};return e.squeezeBind(o).setSteps(H?m(t).mulmaybe(e._steps):void 0)}),Wp=f("striate",function(t,e){const s=Array.from({length:t},(o,i)=>i).map(o=>({begin:o/t,end:(o+1)/t})),r=st(...s);return e.set(r)._fast(t).setSteps(H?m(t).mulmaybe(e._steps):void 0)}),wn=function(t,e,n=.5){return e.speed(1/t*n).unit("c").slow(t)},gn=f("slice",function(t,e,n){return t.innerBind(s=>e.outerBind(r=>n.outerBind(o=>{o=o instanceof Object?o:{s:o};const i=Array.isArray(s)?s[r]:r/s,u=Array.isArray(s)?s[r+1]:(r+1)/s;return I({begin:i,end:u,_slices:s,...o})}))).setSteps(e._steps)},!1);h.prototype.onTriggerTime=function(t){return this.onTrigger((e,n,s,r)=>{const o=r-n;window.setTimeout(()=>{t(e)},o*1e3)},!1)};const $p=f("splice",function(t,e,n){const s=gn(t,e,n);return new h(r=>{const o=r.controls._cps||1;return s.query(r).map(u=>u.withValue(a=>({speed:o/a._slices/u.whole.duration*(a.speed||1),unit:"c",...a})))}).setSteps(e._steps)},!1),{loopAt:Rp,loopat:Lp}=f(["loopAt","loopat"],function(t,e){const n=e._steps?e._steps.div(t):void 0;return new h(s=>wn(t,e,s.controls._cps).query(s),n)}),Fp=f("fit",t=>t.withHaps((e,n)=>e.map(s=>s.withValue(r=>{const o=("end"in r?r.end:1)-("begin"in r?r.begin:0);return{...r,speed:(n.controls._cps||1)/s.whole.duration*o,unit:"c"}})))),{loopAtCps:Dp,loopatcps:Vp}=f(["loopAtCps","loopatcps"],function(t,e,n){return wn(t,n,e)}),Hp=t=>I(1).withValue(()=>y(t())).innerJoin();let Be=t=>t<.5?1:1-(t-.5)/.5,bn=(t,e,n)=>{e=y(e),t=y(t),n=y(n);let s=e.fmap(o=>({gain:Be(o)})),r=e.fmap(o=>({gain:Be(1-o)}));return N(t.mul(s),n.mul(r))};h.prototype.xfade=function(t,e){return bn(this,t,e)};const Gp=t=>(e,n,s)=>{e=m(e).mod(n),n=m(n);const r=e.div(n),o=e.add(1).div(n);return t(s.fmap(i=>I(i)._compress(r,o)))},{beat:Qp}=f(["beat"],Gp(t=>t.innerJoin())),re=(t,e,n)=>{n=m(n);const s=m(1).div(t.length),r=u=>{const a=[];for(const[l,d]of u.entries())d&&a.push([m(l).div(u.length),d]);return a},o=Ct(([u,a],[l,d])=>{const p=n.mul(l-u).add(u),k=p.add(s);return new E(p,k)},r(t),r(e));function i(u){const a=u.span.begin.sam(),l=u.span.cycleArc(),d=[];for(const p of o){const k=p.intersection(l);k!==void 0&&d.push(new z(p.withTime(_=>_.add(a)),k.withTime(_=>_.add(a)),!0))}return d}return new h(i).splitQueries()},Up=(t,e,n)=>(t=y(t),e=y(e),n=y(n),t.innerBind(s=>e.innerBind(r=>n.innerBind(o=>re(s,r,o))))),Kp=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const t of Kp)h.prototype[t]=function(e){const n=y(e).fmap(s=>Array.isArray(s)?[...s,t]:[s,1,t]);return this.distort(n)};function Ot(t){let e=Array.isArray(t);t=e?t:[t];const n=t[0],s=o=>{let i;if(typeof o=="object"&&o.value!==void 0&&(i={...o},o=o.value,delete i.value),e&&Array.isArray(o)){const u=i||{};return o.forEach((a,l)=>{l<t.length&&(u[t[l]]=a)}),u}else return i?(i[n]=o,i):{[n]:o}},r=function(o,i){return i?typeof o>"u"?i.fmap(s):i.set(y(o).withValue(s)):y(o).withValue(s)};return h.prototype[n]=function(o){return r(o,this)},r}const bt=new Map;function _n(t){return bt.has(t)}function c(t,...e){const n=Array.isArray(t)?t[0]:t;let s={};return s[n]=Ot(t),bt.set(n,n),e.forEach(r=>{s[r]=s[n],bt.set(r,n),h.prototype[r]=h.prototype[n]}),s}const{s:vn,sound:kn}=c(["s","n","gain"],"sound"),{wt:qn,wavetablePosition:An}=c("wt","wavetablePosition"),{wtenv:Sn}=c("wtenv"),{wtattack:Bn,wtatt:Tn}=c("wtattack","wtatt"),{wtdecay:Cn,wtdec:xn}=c("wtdecay","wtdec"),{wtsustain:On,wtsus:zn}=c("wtsustain","wtsus"),{wtrelease:En,wtrel:Nn}=c("wtrelease","wtrel"),{wtrate:Mn}=c("wtrate"),{wtsync:Pn}=c("wtsync"),{wtdepth:In}=c("wtdepth"),{wtshape:jn}=c("wtshape"),{wtdc:Jn}=c("wtdc"),{wtskew:Wn}=c("wtskew"),{warp:$n,wavetableWarp:Rn}=c("warp","wavetableWarp"),{warpattack:Ln,warpatt:Fn}=c("warpattack","warpatt"),{warpdecay:Dn,warpdec:Vn}=c("warpdecay","warpdec"),{warpsustain:Hn,warpsus:Gn}=c("warpsustain","warpsus"),{warprelease:Qn,warprel:Un}=c("warprelease","warprel"),{warprate:Kn}=c("warprate"),{warpdepth:Zn}=c("warpdepth"),{warpshape:Xn}=c("warpshape"),{warpdc:Yn}=c("warpdc"),{warpskew:ts}=c("warpskew"),{warpmode:es,wavetableWarpMode:ns}=c("warpmode","wavetableWarpMode"),{wtphaserand:ss,wavetablePhaseRand:rs}=c("wtphaserand","wavetablePhaseRand"),{warpenv:os}=c("warpenv"),{warpsync:is}=c("warpsync"),{source:cs,src:us}=c("source","src"),{n:as}=c("n"),{note:ls}=c(["note","n"]),{accelerate:fs}=c("accelerate"),{velocity:ps}=c("velocity"),{gain:hs}=c("gain"),{postgain:ds}=c("postgain"),{amp:ms}=c("amp"),{attack:ys,att:ws}=c("attack","att"),{fmh:gs}=c(["fmh","fmi"],"fmh"),{fmi:bs,fm:_s}=c(["fmi","fmh"],"fm"),{fmenv:vs}=c("fmenv"),{fmattack:ks}=c("fmattack"),{fmwave:qs}=c("fmwave"),{fmdecay:As}=c("fmdecay"),{fmsustain:Ss}=c("fmsustain"),{fmrelease:Bs}=c("fmrelease"),{fmvelocity:Ts}=c("fmvelocity"),{bank:Cs}=c("bank"),{chorus:xs}=c("chorus"),{analyze:Os}=c("analyze"),{fft:zs}=c("fft"),{decay:Es,dec:Ns}=c("decay","dec"),{sustain:Ms,sus:Ps}=c("sustain","sus"),{release:Is,rel:js}=c("release","rel"),{hold:Js}=c("hold"),{bandf:Ws,bpf:$s,bp:Rs}=c(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Ls,bpq:Fs}=c("bandq","bpq"),{begin:Ds}=c("begin"),{end:Vs}=c("end"),{loop:Hs}=c("loop"),{loopBegin:Gs,loopb:Qs}=c("loopBegin","loopb"),{loopEnd:Us,loope:Ks}=c("loopEnd","loope"),{crush:Zs}=c("crush"),{coarse:Xs}=c("coarse"),{tremolo:Ys}=c(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:tr}=c(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:er}=c("tremolodepth","tremdepth"),{tremoloskew:nr}=c("tremoloskew","tremskew"),{tremolophase:sr}=c("tremolophase","tremphase"),{tremoloshape:rr}=c("tremoloshape","tremshape"),{drive:or}=c("drive"),{duck:ir}=c("duckorbit","duck"),{duckdepth:cr}=c("duckdepth"),{duckonset:ur}=c("duckonset","duckons"),{duckattack:ar}=c("duckattack","duckatt"),{byteBeatExpression:lr,bbexpr:fr}=c("byteBeatExpression","bbexpr"),{byteBeatStartTime:pr,bbst:hr}=c("byteBeatStartTime","bbst"),{channels:dr,ch:mr}=c("channels","ch"),{pw:yr}=c(["pw","pwrate","pwsweep"]),{pwrate:wr}=c("pwrate"),{pwsweep:gr}=c("pwsweep"),{phaserrate:br,ph:_r,phaser:vr}=c(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:kr,phs:qr}=c("phasersweep","phs"),{phasercenter:Ar,phc:Sr}=c("phasercenter","phc"),{phaserdepth:Br,phd:Tr,phasdp:Cr}=c("phaserdepth","phd","phasdp"),{channel:xr}=c("channel"),{cut:Or}=c("cut"),{cutoff:zr,ctf:Er,lpf:Nr,lp:Mr}=c(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Pr,lpe:Ir}=c("lpenv","lpe"),{hpenv:jr,hpe:Jr}=c("hpenv","hpe"),{bpenv:Wr,bpe:$r}=c("bpenv","bpe"),{lpattack:Rr,lpa:Lr}=c("lpattack","lpa"),{hpattack:Fr,hpa:Dr}=c("hpattack","hpa"),{bpattack:Vr,bpa:Hr}=c("bpattack","bpa"),{lpdecay:Gr,lpd:Qr}=c("lpdecay","lpd"),{hpdecay:Ur,hpd:Kr}=c("hpdecay","hpd"),{bpdecay:Zr,bpd:Xr}=c("bpdecay","bpd"),{lpsustain:Yr,lps:to}=c("lpsustain","lps"),{hpsustain:eo,hps:no}=c("hpsustain","hps"),{bpsustain:so,bps:ro}=c("bpsustain","bps"),{lprelease:oo,lpr:io}=c("lprelease","lpr"),{hprelease:co,hpr:uo}=c("hprelease","hpr"),{bprelease:ao,bpr:lo}=c("bprelease","bpr"),{ftype:fo}=c("ftype"),{fanchor:po}=c("fanchor"),{vib:ho,vibrato:mo,v:yo}=c(["vib","vibmod"],"vibrato","v"),{noise:wo}=c("noise"),{vibmod:go,vmod:bo}=c(["vibmod","vib"],"vmod"),{hcutoff:_o,hpf:vo,hp:ko}=c(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:qo,hpq:Ao}=c("hresonance","hpq"),{resonance:So,lpq:Bo}=c("resonance","lpq"),{djf:To}=c("djf"),{delay:Co}=c(["delay","delaytime","delayfeedback"]),{delayfeedback:xo,delayfb:Oo,dfb:zo}=c("delayfeedback","delayfb","dfb"),{delayspeed:Eo}=c("delayspeed"),{delaytime:No,delayt:Mo,dt:Po}=c("delaytime","delayt","dt"),{delaysync:Io}=c("delaysync"),{lock:jo}=c("lock"),{detune:Jo,det:Wo}=c("detune","det"),{unison:$o}=c("unison"),{spread:Ro}=c("spread"),{dry:Lo}=c("dry"),{fadeTime:Fo,fadeOutTime:Do}=c("fadeTime","fadeOutTime"),{fadeInTime:Vo}=c("fadeInTime"),{freq:Ho}=c("freq"),{pattack:Go,patt:Qo}=c("pattack","patt"),{pdecay:Uo,pdec:Ko}=c("pdecay","pdec"),{psustain:Zo,psus:Xo}=c("psustain","psus"),{prelease:Yo,prel:ti}=c("prelease","prel"),{penv:ei}=c("penv"),{pcurve:ni}=c("pcurve"),{panchor:si}=c("panchor"),{gate:ri,gat:oi}=c("gate","gat"),{leslie:ii}=c("leslie"),{lrate:ci}=c("lrate"),{lsize:ui}=c("lsize"),{activeLabel:ai}=c("activeLabel"),{label:li}=c(["label","activeLabel"]),{degree:fi}=c("degree"),{mtranspose:pi}=c("mtranspose"),{ctranspose:hi}=c("ctranspose"),{harmonic:di}=c("harmonic"),{stepsPerOctave:mi}=c("stepsPerOctave"),{octaveR:yi}=c("octaveR"),{nudge:wi}=c("nudge"),{octave:gi}=c("octave"),{orbit:bi}=c("orbit"),{overgain:_i}=c("overgain"),{overshape:vi}=c("overshape"),{pan:ki}=c("pan"),{panspan:qi}=c("panspan"),{pansplay:Ai}=c("pansplay"),{panwidth:Si}=c("panwidth"),{panorient:Bi}=c("panorient"),{rate:Ti}=c("rate"),{slide:Ci}=c("slide"),{semitone:xi}=c("semitone"),{voice:Oi}=c("voice"),{chord:zi}=c("chord"),{dictionary:Ei,dict:Ni}=c("dictionary","dict"),{anchor:Mi}=c("anchor"),{offset:Pi}=c("offset"),{octaves:Ii}=c("octaves"),{mode:ji}=c(["mode","anchor"]),{room:Ji}=c(["room","size"]),{roomlp:Wi,rlp:$i}=c("roomlp","rlp"),{roomdim:Ri,rdim:Li}=c("roomdim","rdim"),{roomfade:Fi,rfade:Di}=c("roomfade","rfade"),{ir:Vi,iresponse:Hi}=c(["ir","i"],"iresponse"),{irspeed:Gi}=c("irspeed"),{irbegin:Qi}=c("irbegin"),{roomsize:Ui,size:Ki,sz:Zi,rsize:Xi}=c("roomsize","size","sz","rsize"),{shape:Yi}=c(["shape","shapevol"]),{distort:tc,dist:ec}=c(["distort","distortvol","distorttype"],"dist"),{distortvol:nc}=c("distortvol","distvol"),{distorttype:sc}=c("distorttype","disttype"),{compressor:rc}=c(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:oc}=c("compressorKnee"),{compressorRatio:ic}=c("compressorRatio"),{compressorAttack:cc}=c("compressorAttack"),{compressorRelease:uc}=c("compressorRelease"),{speed:oe}=c("speed"),{stretch:ac}=c("stretch"),{unit:lc}=c("unit"),{squiz:fc}=c("squiz"),{vowel:pc}=c("vowel"),{waveloss:hc}=c("waveloss"),{density:Zp}=c("density"),{expression:dc}=c("expression"),{sustainpedal:mc}=c("sustainpedal"),{fshift:yc}=c("fshift"),{fshiftnote:wc}=c("fshiftnote"),{fshiftphase:gc}=c("fshiftphase"),{triode:bc}=c("triode"),{krush:_c}=c("krush"),{kcutoff:vc}=c("kcutoff"),{octer:kc}=c("octer"),{octersub:qc}=c("octersub"),{octersubsub:Ac}=c("octersubsub"),{ring:Sc}=c("ring"),{ringf:Bc}=c("ringf"),{ringdf:Tc}=c("ringdf"),{freeze:Cc}=c("freeze"),{xsdelay:xc}=c("xsdelay"),{tsdelay:Oc}=c("tsdelay"),{real:zc}=c("real"),{imag:Ec}=c("imag"),{enhance:Nc}=c("enhance"),{partials:Mc}=c("partials"),{comb:Pc}=c("comb"),{smear:Ic}=c("smear"),{scram:jc}=c("scram"),{binshift:Jc}=c("binshift"),{hbrick:Wc}=c("hbrick"),{lbrick:$c}=c("lbrick"),{frameRate:Rc}=c("frameRate"),{frames:Lc}=c("frames"),{hours:Fc}=c("hours"),{minutes:Dc}=c("minutes"),{seconds:Vc}=c("seconds"),{songPtr:Hc}=c("songPtr"),{uid:Gc}=c("uid"),{val:Qc}=c("val"),{cps:Uc}=c("cps"),{clip:Kc,legato:Zc}=c("clip","legato"),{duration:Xc,dur:Yc}=c("duration","dur"),{zrand:tu}=c("zrand"),{curve:eu}=c("curve"),{deltaSlide:nu}=c("deltaSlide"),{pitchJump:su}=c("pitchJump"),{pitchJumpTime:ru}=c("pitchJumpTime"),{lfo:ou,repeatTime:iu}=c("lfo","repeatTime"),{znoise:cu}=c("znoise"),{zmod:uu}=c("zmod"),{zcrush:au}=c("zcrush"),{zdelay:lu}=c("zdelay"),{zzfx:fu}=c("zzfx"),{color:pu,colour:hu}=c(["color","colour"]);let du=(...t)=>t.reduce((e,n)=>Object.assign(e,{[n]:Ot(n)}),{});const mu=f("adsr",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s,r,o]=t;return e.set({attack:n,decay:s,sustain:r,release:o})}),yu=f("ad",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.attack(n).decay(s)}),wu=f("ds",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=0]=t;return e.set({decay:n,sustain:s})}),gu=f("ar",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.set({attack:n,release:s})}),{midichan:bu}=c("midichan"),{midimap:_u}=c("midimap"),{midiport:vu}=c("midiport"),{midicmd:ku}=c("midicmd"),qu=f("control",(t,e)=>{if(!Array.isArray(t))throw new Error("control expects an array of [ccn, ccv]");const[n,s]=t;return e.ccn(n).ccv(s)}),{ccn:Au}=c("ccn"),{ccv:Su}=c("ccv"),{ctlNum:Bu}=c("ctlNum"),{nrpnn:Tu}=c("nrpnn"),{nrpv:Cu}=c("nrpv"),{progNum:xu}=c("progNum"),Ou=f("sysex",(t,e)=>{if(!Array.isArray(t))throw new Error("sysex expects an array of [id, data]");const[n,s]=t;return e.sysexid(n).sysexdata(s)}),{sysexid:zu}=c("sysexid"),{sysexdata:Eu}=c("sysexdata"),{midibend:Nu}=c("midibend"),{miditouch:Mu}=c("miditouch"),{polyTouch:Pu}=c("polyTouch"),{oschost:Iu}=c("oschost"),{oscport:ju}=c("oscport"),ie=t=>bt.has(t)?bt.get(t):t,Ju=f("as",(t,e)=>(t=Array.isArray(t)?t:[t],e.fmap(n=>(n=Array.isArray(n)?n:[n],n=Object.fromEntries(t.map((s,r)=>[ie(s),n[r]])),n)))),Wu=f("scrub",(t,e)=>t.outerBind(n=>{Array.isArray(n)||(n=[n]);const[s,r=1]=n;return e.begin(s).mul(oe(r)).clip(1)}),!1),Xp=Object.freeze(Object.defineProperty({__proto__:null,accelerate:fs,activeLabel:ai,ad:yu,adsr:mu,amp:ms,analyze:Os,anchor:Mi,ar:gu,as:Ju,att:ws,attack:ys,bandf:Ws,bandq:Ls,bank:Cs,bbexpr:fr,bbst:hr,begin:Ds,binshift:Jc,bp:Rs,bpa:Hr,bpattack:Vr,bpd:Xr,bpdecay:Zr,bpe:$r,bpenv:Wr,bpf:$s,bpq:Fs,bpr:lo,bprelease:ao,bps:ro,bpsustain:so,byteBeatExpression:lr,byteBeatStartTime:pr,ccn:Au,ccv:Su,ch:mr,channel:xr,channels:dr,chord:zi,chorus:xs,clip:Kc,coarse:Xs,color:pu,colour:hu,comb:Pc,compressor:rc,compressorAttack:cc,compressorKnee:oc,compressorRatio:ic,compressorRelease:uc,control:qu,cps:Uc,createParam:Ot,createParams:du,crush:Zs,ctf:Er,ctlNum:Bu,ctranspose:hi,curve:eu,cut:Or,cutoff:zr,dec:Ns,decay:Es,degree:fi,delay:Co,delayfb:Oo,delayfeedback:xo,delayspeed:Eo,delaysync:Io,delayt:Mo,delaytime:No,deltaSlide:nu,density:Zp,det:Wo,detune:Jo,dfb:zo,dict:Ni,dictionary:Ei,dist:ec,distort:tc,distorttype:sc,distortvol:nc,djf:To,drive:or,dry:Lo,ds:wu,dt:Po,duck:ir,duckattack:ar,duckdepth:cr,duckonset:ur,dur:Yc,duration:Xc,end:Vs,enhance:Nc,expression:dc,fadeInTime:Vo,fadeOutTime:Do,fadeTime:Fo,fanchor:po,fft:zs,fm:_s,fmattack:ks,fmdecay:As,fmenv:vs,fmh:gs,fmi:bs,fmrelease:Bs,fmsustain:Ss,fmvelocity:Ts,fmwave:qs,frameRate:Rc,frames:Lc,freeze:Cc,freq:Ho,fshift:yc,fshiftnote:wc,fshiftphase:gc,ftype:fo,gain:hs,gat:oi,gate:ri,getControlName:ie,harmonic:di,hbrick:Wc,hcutoff:_o,hold:Js,hours:Fc,hp:ko,hpa:Dr,hpattack:Fr,hpd:Kr,hpdecay:Ur,hpe:Jr,hpenv:jr,hpf:vo,hpq:Ao,hpr:uo,hprelease:co,hps:no,hpsustain:eo,hresonance:qo,imag:Ec,ir:Vi,irbegin:Qi,iresponse:Hi,irspeed:Gi,isControlName:_n,kcutoff:vc,krush:_c,label:li,lbrick:$c,legato:Zc,leslie:ii,lfo:ou,lock:jo,loop:Hs,loopBegin:Gs,loopEnd:Us,loopb:Qs,loope:Ks,lp:Mr,lpa:Lr,lpattack:Rr,lpd:Qr,lpdecay:Gr,lpe:Ir,lpenv:Pr,lpf:Nr,lpq:Bo,lpr:io,lprelease:oo,lps:to,lpsustain:Yr,lrate:ci,lsize:ui,midibend:Nu,midichan:bu,midicmd:ku,midimap:_u,midiport:vu,miditouch:Mu,minutes:Dc,mode:ji,mtranspose:pi,n:as,noise:wo,note:ls,nrpnn:Tu,nrpv:Cu,nudge:wi,octave:gi,octaveR:yi,octaves:Ii,octer:kc,octersub:qc,octersubsub:Ac,offset:Pi,orbit:bi,oschost:Iu,oscport:ju,overgain:_i,overshape:vi,pan:ki,panchor:si,panorient:Bi,panspan:qi,pansplay:Ai,panwidth:Si,partials:Mc,patt:Qo,pattack:Go,pcurve:ni,pdec:Ko,pdecay:Uo,penv:ei,ph:_r,phasdp:Cr,phaser:vr,phasercenter:Ar,phaserdepth:Br,phaserrate:br,phasersweep:kr,phc:Sr,phd:Tr,phs:qr,pitchJump:su,pitchJumpTime:ru,polyTouch:Pu,postgain:ds,prel:ti,prelease:Yo,progNum:xu,psus:Xo,psustain:Zo,pw:yr,pwrate:wr,pwsweep:gr,rate:Ti,rdim:Li,real:zc,registerControl:c,rel:js,release:Is,repeatTime:iu,resonance:So,rfade:Di,ring:Sc,ringdf:Tc,ringf:Bc,rlp:$i,room:Ji,roomdim:Ri,roomfade:Fi,roomlp:Wi,roomsize:Ui,rsize:Xi,s:vn,scram:jc,scrub:Wu,seconds:Vc,semitone:xi,shape:Yi,size:Ki,slide:Ci,smear:Ic,songPtr:Hc,sound:kn,source:cs,speed:oe,spread:Ro,squiz:fc,src:us,stepsPerOctave:mi,stretch:ac,sus:Ps,sustain:Ms,sustainpedal:mc,sysex:Ou,sysexdata:Eu,sysexid:zu,sz:Zi,tremolo:Ys,tremolodepth:er,tremolophase:sr,tremoloshape:rr,tremoloskew:nr,tremolosync:tr,triode:bc,tsdelay:Oc,uid:Gc,unison:$o,unit:lc,v:yo,val:Qc,velocity:ps,vib:ho,vibmod:go,vibrato:mo,vmod:bo,voice:Oi,vowel:pc,warp:$n,warpatt:Fn,warpattack:Ln,warpdc:Yn,warpdec:Vn,warpdecay:Dn,warpdepth:Zn,warpenv:os,warpmode:es,warprate:Kn,warprel:Un,warprelease:Qn,warpshape:Xn,warpskew:ts,warpsus:Gn,warpsustain:Hn,warpsync:is,waveloss:hc,wavetablePhaseRand:rs,wavetablePosition:An,wavetableWarp:Rn,wavetableWarpMode:ns,wt:qn,wtatt:Tn,wtattack:Bn,wtdc:Jn,wtdec:xn,wtdecay:Cn,wtdepth:In,wtenv:Sn,wtphaserand:ss,wtrate:Mn,wtrel:Nn,wtrelease:En,wtshape:jn,wtskew:Wn,wtsus:zn,wtsustain:On,wtsync:Pn,xsdelay:xc,zcrush:au,zdelay:lu,zmod:uu,znoise:cu,zrand:tu,zzfx:fu},Symbol.toStringTag,{value:"Module"})),Yp=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=Zt(s,r);return[[s,n-s],[Ct((a,l)=>a.concat(l),i,o),u]]},th=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=Zt(n,o);return[[n,s-n],[Ct((l,d)=>l.concat(d),r,i),u]]},$u=function(t,e){const[n,s]=t;return Math.min(n,s)<=1?[t,e]:$u(...n>s?Yp(t,e):th(t,e))},ce=function(t,e){const n=t<0,s=Math.abs(t),r=e-s,o=Array(s).fill([1]),i=Array(r).fill([0]),u=$u([s,r],[o,i]),a=X(u[1][0]).concat(X(u[1][1]));return n?a.map(l=>1-l):a},zt=function(t,e,n){const s=ce(t,e);return n?Me(s,-n):s},eh=f("euclid",function(t,e,n){return n.struct(zt(t,e,0))}),nh=f("bjork",function(t,e){Array.isArray(t)||(t=[t]);const[n,s=n,r=0]=t;return e.struct(zt(n,s,r))}),{euclidrot:sh,euclidRot:rh}=f(["euclidrot","euclidRot"],function(t,e,n,s){return s.struct(zt(t,e,n))}),Ru=function(t,e,n,s){if(t<1)return B;const o=zt(t,e,0).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return s.struct(yn(...o)).late(m(n).div(e))},oh=f(["euclidLegato"],function(t,e,n){return Ru(t,e,0,n)}),ih=f(["euclidLegatoRot"],function(t,e,n,s){return Ru(t,e,n,s)}),{euclidish:ch,eish:uh}=f(["euclidish","eish"],function(t,e,n,s){const r=re(ce(t,e),new Array(t).fill(1),n);return s.struct(r).setSteps(e)});function Lu(t,e,n=.05,s=.1,r=.1,o=globalThis.setInterval,i=globalThis.clearInterval,u=!0){let a=0,l=0,d=10**4,p=.01;const k=F=>n=F(n);r=r||s/2;const _=()=>{const F=t(),rt=F+s+r;for(l===0&&(l=F+p);l<rt;)l=u?Math.round(l*d)/d:l,e(l,n,a,F),l+=n,a++};let A;const C=()=>{R(),_(),A=o(_,s*1e3)},R=()=>{A!==void 0&&i(A),A=void 0};return{setDuration:k,start:C,stop:()=>{a=0,l=0,R()},pause:()=>R(),duration:n,interval:s,getPhase:()=>l,minLatency:p}}function ah(t){return new h(e=>[new z(void 0,e.span,t)])}const Q=t=>{const e=n=>[new z(void 0,n.span,t(n.span.begin))];return new h(e)},At=Q(t=>t%1),ue=At.toBipolar(),Et=Q(t=>1-t%1),ae=Et.toBipolar(),le=Q(t=>Math.sin(Math.PI*2*t)),Fu=le.fromBipolar(),lh=Fu._early(m(1).div(4)),fh=le._early(m(1).div(4)),Du=Q(t=>Math.floor(t*2%2)),ph=Du.toBipolar(),hh=$(At,Et),dh=$(ue,ae),mh=$(Et,At),yh=$(ae,ue),fe=Q(ut);let pe=0,he=0;typeof window<"u"&&document.addEventListener("mousemove",t=>{pe=t.clientY/document.body.clientHeight,he=t.clientX/document.body.clientWidth});const wh=Q(()=>pe),gh=Q(()=>pe),bh=Q(()=>he),_h=Q(()=>he),Vu=t=>{const e=t<<13^t,n=e>>17^e;return n<<5^n},vh=t=>t-Math.trunc(t),Hu=t=>Vu(Math.trunc(vh(t/300)*536870912)),Gu=t=>t%536870912/536870912,_t=t=>Math.abs(Gu(Hu(t))),kh=(t,e)=>{const n=[];for(let s=0;s<e;++s)n.push(Gu(t)),t=Vu(t);return n},qh=(t,e)=>kh(Hu(t),e),Qu=t=>At.range(0,t).round().segment(t),Ah=t=>{const e=y(t).log2(0).floor().add(1);return Uu(t,e)},Uu=(t,e=16)=>{e=y(e);const n=Qu(e).mul(-1).add(e.sub(1));return y(t).segment(e).brshift(n).band(I(1))},Ku=t=>Q(e=>{const s=qh(e.floor().add(.5),t).map((o,i)=>[o,i]).sort((o,i)=>(o[0]>i[0])-(o[0]<i[0])).map(o=>o[1]),r=e.cyclePos().mul(t).floor()%t;return s[r]})._segment(t),Zu=(t,e,n)=>{const s=[...Array(e).keys()].map(r=>n.zoom(m(r).div(e),m(r+1).div(e)));return t.fmap(r=>s[r].repeatCycles(e)._fast(e)).innerJoin()},Sh=f("shuffle",(t,e)=>Zu(Ku(t),t,e)),Bh=f("scramble",(t,e)=>Zu(me(t)._segment(t),t,e)),G=Q(_t),Th=G.toBipolar(),de=t=>G.fmap(e=>e<t),Ch=t=>y(t).fmap(de).innerJoin(),xh=de(.5),me=t=>G.fmap(e=>Math.trunc(e*t)),Oh=t=>y(t).fmap(me).innerJoin(),ye=(t,e)=>(e=e.map(y),e.length==0?B:t.range(0,e.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[s]})),Nt=(t,e)=>ye(t,e).outerJoin(),we=(t,e)=>ye(t,e).innerJoin(),Xu=(...t)=>Nt(G,t),zh=(...t)=>we(G,t),Eh=Xu;h.prototype.choose=function(...t){return Nt(this,t)};h.prototype.choose2=function(...t){return Nt(this.fromBipolar(),t)};const Yu=(...t)=>we(G.segment(1),t),Nh=Yu,ta=function(t,...e){const n=e.map(u=>y(u[0])),s=[];let r=I(0);for(const u of e)r=r.add(u[1]),s.push(r);const o=Ge(s),i=function(u){const a=r.mul(u);return o.fmap(l=>d=>n[l.findIndex(p=>p>d,l)]).appLeft(a)};return t.bind(i)},Mh=(...t)=>ta(...t).outerJoin(),Ph=(...t)=>Mh(G,...t),ea=(...t)=>ta(G.segment(1),...t).innerJoin(),Ih=ea;function jh(t){let e=Math.floor(t),n=e+1;const s=i=>6*i**5-15*i**4+10*i**3;return(i=>u=>a=>u+s(i)*(a-u))(t-e)(_t(e))(_t(n))}const na=t=>t.fmap(jh);function Jh(t){const e=Math.floor(t),n=e+1,s=_t(e),r=_t(n)+s,o=(t-e)/(n-e);return((u,a,l)=>u+(a-u)*l)(s,r,o)/2}const sa=t=>t.fmap(Jh),Wh=na(fe.fmap(t=>Number(t))),$h=sa(fe.fmap(t=>Number(t))),Rh=f("degradeByWith",(t,e,n)=>n.fmap(s=>r=>s).appLeft(t.filterValues(s=>s>e)),!0,!0),Lh=f("degradeBy",function(t,e){return e._degradeByWith(G,t)},!0,!0),Fh=f("degrade",t=>t._degradeBy(.5),!0,!0),Dh=f("undegradeBy",function(t,e){return e._degradeByWith(G.fmap(n=>1-n),t)},!0,!0),Vh=f("undegrade",t=>t._undegradeBy(.5),!0,!0),Hh=f("sometimesBy",function(t,e,n){return y(t).fmap(s=>N(n._degradeBy(s),e(n._undegradeBy(1-s)))).innerJoin()}),Gh=f("sometimes",function(t,e){return e._sometimesBy(.5,t)}),Qh=f("someCyclesBy",function(t,e,n){return y(t).fmap(s=>N(n._degradeByWith(G._segment(1),s),e(n._degradeByWith(G.fmap(r=>1-r)._segment(1),1-s)))).innerJoin()}),Uh=f("someCycles",function(t,e){return e._someCyclesBy(.5,t)}),Kh=f("often",function(t,e){return e.sometimesBy(.75,t)}),Zh=f("rarely",function(t,e){return e.sometimesBy(.25,t)}),Xh=f("almostNever",function(t,e){return e.sometimesBy(.1,t)}),Yh=f("almostAlways",function(t,e){return e.sometimesBy(.9,t)}),td=f("never",function(t,e){return e}),ed=f("always",function(t,e){return t(e)});function ge(t){Array.isArray(t)===!1&&(t=[t]);const e=Ve();return t.every(n=>{const s=De.get(n)??n;return e[s]})}const nd=f("whenKey",function(t,e,n){return n.when(ge(t),e)}),sd=f("keyDown",function(t){return t.fmap(ge)}),K=function(t,e,n=!0){const s=Array.isArray(t),r=Object.keys(t).length;return t=Le(t,y),r===0?B:e.fmap(o=>{let i=o;return s&&(i=n?Math.round(i)%r:Je(Math.round(i),0,t.length-1)),t[i]})},ra=function(t,e){return Array.isArray(e)&&([e,t]=[t,e]),rd(t,e)},rd=f("pick",function(t,e){return K(t,e,!1).innerJoin()}),oa=f("pickmod",function(t,e){return K(t,e,!0).innerJoin()}),od=f("pickF",function(t,e,n){return n.apply(ra(t,e))}),id=f("pickmodF",function(t,e,n){return n.apply(oa(t,e))}),cd=f("pickOut",function(t,e){return K(t,e,!1).outerJoin()}),ud=f("pickmodOut",function(t,e){return K(t,e,!0).outerJoin()}),ad=f("pickRestart",function(t,e){return K(t,e,!1).restartJoin()}),ld=f("pickmodRestart",function(t,e){return K(t,e,!0).restartJoin()}),fd=f("pickReset",function(t,e){return K(t,e,!1).resetJoin()}),pd=f("pickmodReset",function(t,e){return K(t,e,!0).resetJoin()}),{inhabit:hd,pickSqueeze:dd}=f(["inhabit","pickSqueeze"],function(t,e){return K(t,e,!1).squeezeJoin()}),{inhabitmod:md,pickmodSqueeze:yd}=f(["inhabitmod","pickmodSqueeze"],function(t,e){return K(t,e,!0).squeezeJoin()}),wd=(t,e)=>(e=e.map(y),e.length==0?B:t.fmap(n=>{const s=kt(Math.round(n),e.length);return e[s]}).squeezeJoin());let Bt;try{Bt=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let Te=Bt?.getVoices();function gd(t,e,n){Bt.cancel();const s=new SpeechSynthesisUtterance(t);s.lang=e,Te=Bt.getVoices();const r=Te.filter(o=>o.lang.includes(e));typeof n=="number"?s.voice=r[n%r.length]:typeof n=="string"&&(s.voice=r.find(o=>o.name===o)),speechSynthesis.speak(s)}const bd=f("speak",function(t,e,n){return n.onTrigger(s=>{gd(s.value,t,e)})}),ia={},ca=async(...t)=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="fulfilled").map(s=>s.value);return e.forEach((s,r)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${r} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([r,o])=>{globalThis[r]=o,ia[r]=o})}),n};function _d(t,e={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=e;n&&(t=`{${t}}`),s&&(t=`(async ()=>${t})()`);const r=`"use strict";return (${t})`;return Function(r)()}const ua=async(t,e,n)=>{let s={};if(e){const i=e(t,n);t=i.output,s=i}return{mode:"javascript",pattern:await _d(t,{wrapExpression:!!e}),meta:s}};class vd{constructor({onTrigger:e,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.getTime=s,this.time_at_last_tick_message=0,this.collator=new Fe({getTargetClockTime:s}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL("/strudel/_astro/clockworker-ZDiUtESR.js",import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const r=i=>{const{cps:u,begin:a,end:l,cycle:d,time:p}=i;this.cps=u,this.cycle=d;const k=this.collator.calculateOffset(p)+p;o(a,l,k),this.time_at_last_tick_message=k},o=(i,u,a)=>{if(this.started===!1)return;this.pattern.queryArc(i,u,{_cps:this.cps,cyclist:"neocyclist"}).forEach(d=>{if(d.hasOnset()){const k=Wt(d.whole.begin-this.cycle,this.cps)+a+this.latency,_=Wt(d.duration,this.cps);e?.(d,0,_,this.cps,k)}})};this.channel.onmessage=i=>{if(!this.started)return;const{payload:u,type:a}=i.data;switch(a){case"tick":r(u)}}}sendMessage(e,n){this.worker.port.postMessage({type:e,payload:n,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){this.sendMessage("toggle",{started:e}),this.started=e,this.onToggle?.(e)}start(){j("[cyclist] start"),this.setStarted(!0)}stop(){j("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}class aa{constructor({interval:e,onTrigger:n,onToggle:s,onError:r,getTime:o,latency:i=.1,setInterval:u,clearInterval:a,beforeStart:l}){this.started=!1,this.beforeStart=l,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=o,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=i,this.clock=Lu(o,(d,p,k,_)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=d),this.num_ticks_since_cps_change++;const C=this.num_ticks_since_cps_change*p*this.cps;try{const R=this.lastEnd;this.lastBegin=R;const L=this.num_cycles_at_cps_change+C;if(this.lastEnd=L,this.lastTick=d,d<_){console.log("skip query: too late");return}this.pattern.queryArc(R,L,{_cps:this.cps,cyclist:"cyclist"}).forEach(O=>{if(O.hasOnset()){const F=(O.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+i,rt=O.duration/this.cps,tt=F-d;n?.(O,tt,rt,this.cps,F),O.value.cps!==void 0&&this.cps!=O.value.cps&&(this.cps=O.value.cps,this.num_ticks_since_cps_change=0)}})}catch(R){Qt(R),r?.(R)}},e,.1,.1,u,a)}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");j("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){j("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){j("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(e,n=!1){this.pattern=e,n&&!this.started&&await this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let Dt;function kd(){if(!Dt)throw new Error("no time set! use setTime to define a time source");return Dt()}function Vt(t){Dt=t}function qd({defaultOutput:t,onEvalError:e,beforeEval:n,beforeStart:s,afterEval:r,getTime:o,transpiler:i,onToggle:u,editPattern:a,onUpdateState:l,sync:d=!1,setInterval:p,clearInterval:k,id:_,mondo:A=!1}){const C={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},R={id:_},L=q=>{Object.assign(C,q),C.isDirty=C.code!==C.activeCode,C.error=C.evalError||C.schedulerError,l?.(C)},dt={onTrigger:la({defaultOutput:t,getTime:o}),getTime:o,onToggle:q=>{L({started:q}),u?.(q)},setInterval:p,clearInterval:k,beforeStart:s},O=d&&typeof SharedWorker<"u"?new vd(dt):new aa(dt);let F={},rt=0,tt;const be=function(){return F={},rt=0,tt=void 0,B};function _e(q){return q._Pattern?q.__pure:q}const ve=async(q,x=!0)=>(q=a?.(q)||q,await O.setPattern(q,x),q);Vt(()=>O.now());const fa=()=>O.stop(),pa=()=>O.start(),ha=()=>O.pause(),da=()=>O.toggle(),Mt=q=>(O.setCps(_e(q)),B),ke=q=>(O.setCps(_e(q)/60),B);let mt=[];const ma=function(q){return mt.push(q),B},ya=function(q){return tt=q,B},wa=()=>{h.prototype.p=function(x){return typeof x=="string"&&(x.startsWith("_")||x.endsWith("_"))?B:(x==="$"&&(x=`$${rt}`,rt++),F[x]=this,this)},h.prototype.q=function(x){return B};try{for(let x=1;x<10;++x)Object.defineProperty(h.prototype,`d${x}`,{get(){return this.p(x)},configurable:!0}),Object.defineProperty(h.prototype,`p${x}`,{get(){return this.p(x)},configurable:!0}),h.prototype[`q${x}`]=B}catch(x){console.warn("injectPatternMethods: error:",x)}const q=f("cpm",function(x,Pt){return Pt._fast(x/60/O.cps)});return ca({all:ma,each:ya,hush:be,cpm:q,setCps:Mt,setcps:Mt,setCpm:ke,setcpm:ke})};return{scheduler:O,evaluate:async(q,x=!0,Pt=!0)=>{if(!q)throw new Error("no code to evaluate");try{L({code:q,pending:!0}),await wa(),Vt(()=>O.now()),await n?.({code:q}),mt=[],Pt&&be(),A&&(q=`mondolang\`${q}\``);let{pattern:P,meta:It}=await ua(q,i,R);if(Object.keys(F).length){let et=[];for(const[jt,ga]of Object.entries(F))et.push(ga.withState(ba=>ba.setControls({id:jt})));tt&&(et=et.map(jt=>tt(jt))),P=N(...et)}else tt&&(P=tt(P));if(mt.length)for(let et in mt)P=mt[et](P);if(!Yt(P)){const et=`got "${typeof evaluated}" instead of pattern`;throw new Error(et+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return j("[eval] code updated"),P=await ve(P,x),L({miniLocations:It?.miniLocations||[],widgets:It?.widgets||[],activeCode:q,pattern:P,evalError:void 0,schedulerError:void 0,pending:!1}),r?.({code:q,pattern:P,meta:It}),P}catch(P){j(`[eval] error: ${P.message}`,"error"),console.error(P),L({evalError:P,pending:!1}),e?.(P)}},start:pa,stop:fa,pause:ha,setCps:Mt,setPattern:ve,setCode:q=>L({code:q}),toggle:da,state:C}}const la=({getTime:t,defaultOutput:e})=>async(n,s,r,o,i)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,s,r,o,i),n.context.onTrigger&&await n.context.onTrigger(n,t(),o,i)}catch(u){Qt(u,"getTrigger")}},Ad=function(t,e={}){const n=document.getElementById("code"),s="background-image:url("+t+");background-size:contain;";n.style=s;const{className:r}=n,o=(a,l)=>{({style:()=>n.style=s+";"+l,className:()=>n.className=l+" "+r})[a]()},i=Object.entries(e).filter(([a,l])=>typeof l=="function");Object.entries(e).filter(([a,l])=>typeof l=="string").forEach(([a,l])=>o(a,l)),i.length},Sd=()=>{const t=document.getElementById("code");t&&(t.style="")};j("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const xd=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Fe,Cyclist:aa,Fraction:m,Hap:z,Pattern:h,State:lt,TimeSpan:E,__chooseWith:ye,_brandBy:de,_fitslice:en,_irand:me,_keyDown:ge,_match:nn,_mod:kt,_morph:re,_polymeterListSteps:rn,_retime:Lt,_slices:Ft,accelerate:fs,activeLabel:ai,ad:yu,add:Bl,adsr:mu,almostAlways:Yh,almostNever:Xh,always:ed,amp:ms,analyze:Os,anchor:Mi,and:Vl,apply:kf,applyN:tn,ar:gu,arp:ol,arpWith:rl,arrange:fl,as:Ju,att:ws,attack:ys,averageArray:Ee,backgroundImage:Ad,band:El,bandf:Ws,bandq:Ls,bank:Cs,base64ToUnicode:Re,bbexpr:fr,bbst:hr,beat:Qp,begin:Ds,berlin:$h,berlinWith:sa,binary:Ah,binaryN:Uu,bind:wl,binshift:Jc,bite:Cf,bjork:nh,bjorklund:ce,blshift:Pl,bor:Nl,bp:Rs,bpa:Hr,bpattack:Vr,bpd:Xr,bpdecay:Zr,bpe:$r,bpenv:Wr,bpf:$s,bpq:Fs,bpr:lo,bprelease:ao,bps:ro,bpsustain:so,brak:Jf,brand:xh,brandBy:Ch,brshift:Il,bxor:Ml,bypass:dp,byteBeatExpression:lr,byteBeatStartTime:pr,calculateSteps:tl,cat:gt,ccn:Au,ccv:Su,ceil:Kl,ch:mr,channel:xr,channels:dr,choose:Xu,chooseCycles:Yu,chooseIn:zh,chooseInWith:we,chooseOut:Eh,chooseWith:Nt,chop:Jp,chord:zi,chorus:xs,chunk:sp,chunkBack:ip,chunkBackInto:hp,chunkInto:fp,chunkback:cp,chunkbackinto:pp,chunkinto:lp,clamp:Je,cleanupUi:Sd,clip:Kc,coarse:Xs,code2hash:Ga,color:pu,colour:hu,comb:Pc,compose:Pa,compress:sf,compressSpan:rf,compressor:rc,compressorAttack:cc,compressorKnee:oc,compressorRatio:ic,compressorRelease:uc,compressspan:of,constant:Ia,contract:fn,control:qu,controls:Xp,cosine:lh,cosine2:fh,cpm:qf,cps:Uc,createClock:Lu,createParam:Ot,createParams:du,crush:Zs,ctf:Er,ctlNum:Bu,ctranspose:hi,curry:v,curve:eu,cut:Or,cutoff:zr,cycleToSeconds:Wt,dec:Ns,decay:Es,degrade:Fh,degradeBy:Lh,degradeByWith:Rh,degree:fi,delay:Co,delayfb:Oo,delayfeedback:xo,delayspeed:Eo,delaysync:Io,delayt:Mo,delaytime:No,deltaSlide:nu,det:Wo,detune:Jo,dfb:zo,dict:Ni,dictionary:Ei,dist:ec,distort:tc,distorttype:sc,distortvol:nc,div:xl,djf:To,drawLine:He,drive:or,drop:un,dry:Lo,ds:wu,dt:Po,duck:ir,duckattack:ar,duckdepth:cr,duckonset:ur,dur:Yc,duration:Xc,early:Af,echo:Uf,echoWith:Vf,echowith:Hf,eish:uh,end:Vs,enhance:Nc,eq:Rl,eqt:Ll,errorLogger:Qt,euclid:eh,euclidLegato:oh,euclidLegatoRot:ih,euclidRot:rh,euclidish:ch,euclidrot:sh,evalScope:ca,evaluate:ua,every:vf,expand:ln,expression:dc,extend:an,fadeInTime:Vo,fadeOutTime:Do,fadeTime:Fo,fanchor:po,fast:hf,fastChunk:ap,fastGap:cf,fastcat:$,fastchunk:up,fastgap:uf,fft:zs,filter:bp,filterWhen:_p,firstOf:_f,fit:Fp,flatten:X,floor:Ul,fm:_s,fmattack:ks,fmdecay:As,fmenv:vs,fmh:gs,fmi:bs,fmrelease:Bs,fmsustain:Ss,fmvelocity:Ts,fmwave:qs,focus:af,focusSpan:lf,focusspan:ff,fractionalArgs:ja,frameRate:Rc,frames:Lc,freeze:Cc,freq:Ho,freqToMidi:Oe,fromBipolar:Xl,fshift:yc,fshiftnote:wc,fshiftphase:gc,ftype:fo,func:Gl,gain:hs,gap:pt,gat:oi,gate:ri,getAccidentalsOffset:xe,getControlName:ie,getCurrentKeyboardState:Ve,getEventOffsetMs:xa,getFreq:ze,getFrequency:Ma,getPerformanceTimeSeconds:Ua,getPlayableNoteValue:Na,getSoundIndex:Ea,getTime:kd,getTrigger:la,grow:qp,gt:Jl,gte:$l,harmonic:di,hash2code:Qa,hbrick:Wc,hcutoff:_o,hold:Js,hours:Fc,hp:ko,hpa:Dr,hpattack:Fr,hpd:Kr,hpdecay:Ur,hpe:Jr,hpenv:jr,hpf:vo,hpq:Ao,hpr:uo,hprelease:co,hps:no,hpsustain:eo,hresonance:qo,hsl:gp,hsla:wp,hurry:df,id:ut,imag:Ec,inhabit:hd,inhabitmod:md,innerBind:gl,inside:wf,inv:Pf,invert:Mf,ir:Vi,irand:Oh,irbegin:Qi,iresponse:Hi,irspeed:Gi,isControlName:_n,isNote:Tt,isNoteWithOctave:Sa,isPattern:Yt,isaw:Et,isaw2:ae,iter:Yf,iterBack:tp,iterback:ep,itri:mh,itri2:yh,jux:Df,juxBy:Lf,juxby:Ff,kcutoff:vc,keep:Al,keepif:Sl,keyAlias:De,keyDown:sd,krush:_c,label:li,lastOf:bf,late:Xe,lbrick:$c,legato:Zc,leslie:ii,lfo:ou,linger:xf,listRange:qt,lock:jo,logKey:Gt,logger:j,loop:Hs,loopAt:Rp,loopAtCps:Dp,loopBegin:Gs,loopEnd:Us,loopat:Lp,loopatcps:Vp,loopb:Qs,loope:Ks,lp:Mr,lpa:Lr,lpattack:Rr,lpd:Qr,lpdecay:Gr,lpe:Ir,lpenv:Pr,lpf:Nr,lpq:Bo,lpr:io,lprelease:oo,lps:to,lpsustain:Yr,lrate:ci,lsize:ui,lt:jl,lte:Wl,mapArgs:Kt,mask:hl,midi2note:za,midiToFreq:at,midibend:Nu,midichan:bu,midicmd:ku,midimap:_u,midiport:vu,miditouch:Mu,minutes:Dc,mod:Ol,mode:ji,morph:Up,mouseX:_h,mouseY:gh,mousex:bh,mousey:wh,mtranspose:pi,mul:Cl,n:as,nanFallback:Ne,ne:Fl,net:Dl,never:td,noise:wo,note:ls,noteToMidi:vt,nothing:V,nrpnn:Tu,nrpv:Cu,nudge:wi,numeralArgs:D,objectMap:Le,octave:gi,octaveR:yi,octaves:Ii,octer:kc,octersub:qc,octersubsub:Ac,off:jf,offset:Pi,often:Kh,or:Hl,orbit:bi,oschost:Iu,oscport:ju,outerBind:bl,outside:gf,overgain:_i,overshape:vi,pace:sn,pairs:je,palindrome:Rf,pan:ki,panchor:si,panorient:Bi,panspan:qi,pansplay:Ai,panwidth:Si,parseFractional:Ie,parseNumeral:Ut,partials:Mc,patt:Qo,pattack:Go,pcurve:ni,pdec:Ko,pdecay:Uo,penv:ei,perlin:Wh,perlinWith:na,ph:_r,phasdp:Cr,phaser:vr,phasercenter:Ar,phaserdepth:Br,phaserrate:br,phasersweep:kr,phc:Sr,phd:Tr,phs:qr,pick:ra,pickF:od,pickOut:cd,pickReset:fd,pickRestart:ad,pickSqueeze:dd,pickmod:oa,pickmodF:id,pickmodOut:ud,pickmodReset:pd,pickmodRestart:ld,pickmodSqueeze:yd,pipe:Pe,pitchJump:su,pitchJumpTime:ru,ply:pf,plyForEach:Xf,plyWith:Zf,pm:al,polyBind:kl,polyTouch:Pu,polymeter:xt,polyrhythm:cl,postgain:ds,pow:zl,pr:ul,prel:ti,prelease:Yo,press:$f,pressBy:Wf,progNum:xu,psus:Xo,psustain:Zo,pure:I,pw:yr,pwrate:wr,pwsweep:gr,rand:G,rand2:Th,randcat:Nh,randrun:Ku,range:Yl,range2:ef,rangex:tf,rarely:Zh,rate:Ti,ratio:nf,rdim:Li,real:zc,ref:Hp,register:f,registerControl:c,reify:y,rel:js,release:Is,removeUndefineds:ft,repeatCycles:np,repeatTime:iu,repl:qd,replicate:kp,resonance:So,rev:Ye,rfade:Di,rib:yp,ribbon:mp,ring:Sc,ringdf:Tc,ringf:Bc,rlp:$i,room:Ji,roomdim:Ri,roomfade:Fi,roomlp:Wi,roomsize:Ui,rotate:Me,round:Ql,rsize:Xi,run:Qu,s:vn,s_add:Op,s_alt:Bp,s_cat:Sp,s_contract:Mp,s_expand:Ep,s_extend:Np,s_polymeter:Tp,s_sub:zp,s_taper:Cp,s_taperlist:xp,s_tour:Pp,s_zip:Ip,saw:At,saw2:ue,scram:jc,scramble:Bh,scrub:Wu,seconds:Vc,seg:zf,segment:Of,semitone:xi,seq:Ze,seqPLoop:pl,sequence:Y,sequenceP:Ge,set:ql,setStringParser:el,setTime:Vt,shape:Yi,shrink:hn,shrinklist:pn,shuffle:Sh,signal:Q,silence:B,sine:Fu,sine2:le,size:Ki,slice:gn,slide:Ci,slow:mf,slowChunk:op,slowcat:st,slowcatPrime:ee,slowchunk:rp,smear:Ic,sol2note:Da,someCycles:Uh,someCyclesBy:Qh,sometimes:Gh,sometimesBy:Hh,songPtr:Hc,sound:kn,source:cs,sparsity:yf,speak:bd,speed:oe,splice:$p,splitAt:Zt,spread:Ro,square:Du,square2:ph,squeeze:wd,squeezeBind:_l,squiz:fc,src:us,stack:N,stackBy:ll,stackCentre:Ke,stackLeft:Qe,stackRight:Ue,steady:ah,stepBind:vl,stepalt:on,stepcat:W,steps:jp,stepsPerOctave:mi,stretch:ac,striate:Wp,stringifyValues:Xt,struct:dl,strudelScope:ia,stut:Kf,stutWith:Gf,stutwith:Qf,sub:Tl,superimpose:ml,sus:Ps,sustain:Ms,sustainpedal:mc,swing:Nf,swingBy:Ef,sysex:Ou,sysexdata:Eu,sysexid:zu,sz:Zi,take:cn,time:fe,timeCat:yn,timecat:Ap,toBipolar:Zl,tokenizeNote:Ce,tour:dn,tremolo:Ys,tremolodepth:er,tremolophase:sr,tremoloshape:rr,tremoloskew:nr,tremolosync:tr,tri:hh,tri2:dh,triode:bc,tsdelay:Oc,uid:Gc,undegrade:Vh,undegradeBy:Dh,unicodeToBase64:$e,uniq:Va,uniqsort:Ha,uniqsortr:We,unison:$o,unit:lc,v:yo,val:Qc,valueToMidi:Ca,velocity:ps,vib:ho,vibmod:go,vibrato:mo,vmod:bo,voice:Oi,vowel:pc,warp:$n,warpatt:Fn,warpattack:Ln,warpdc:Yn,warpdec:Vn,warpdecay:Dn,warpdepth:Zn,warpenv:os,warpmode:es,warprate:Kn,warprel:Un,warprelease:Qn,warpshape:Xn,warpskew:ts,warpsus:Gn,warpsustain:Hn,warpsync:is,waveloss:hc,wavetablePhaseRand:rs,wavetablePosition:An,wavetableWarp:Rn,wavetableWarpMode:ns,wchoose:Ph,wchooseCycles:ea,when:If,whenKey:nd,withValue:yl,within:vp,wrandcat:Ih,wt:qn,wtatt:Tn,wtattack:Bn,wtdc:Jn,wtdec:xn,wtdecay:Cn,wtdepth:In,wtenv:Sn,wtphaserand:ss,wtrate:Mn,wtrel:Nn,wtrelease:En,wtshape:jn,wtskew:Wn,wtsus:zn,wtsustain:On,wtsync:Pn,xfade:bn,xsdelay:xc,zcrush:au,zdelay:lu,zip:mn,zipWith:Ct,zmod:uu,znoise:cu,zoom:Sf,zoomArc:Bf,zoomarc:Tf,zrand:tu,zzfx:fu},Symbol.toStringTag,{value:"Module"}));export{Ua as $,Hp as A,Ma as B,Fe as C,Ga as D,du as E,I as F,Oe as G,at as H,Ea as I,Na as J,xd as K,Je as L,m as M,yn as N,it as O,h as P,Y as Q,$ as R,we as S,G as T,N as U,el as V,ft as W,xe as X,c as Y,qd as Z,kt as _,Yi as a,Ca as a0,ca as a1,Qa as a2,Q as b,f as c,xa as d,B as e,ia as f,kd as g,W as h,Tt as i,hf as j,mf as k,j as l,za as m,vt as n,kp as o,Ut as p,ln as q,y as r,oe as s,sn as t,Lh as u,nh as v,zh as w,Ze as x,Yt as y,ie as z};
